import{M as l}from"../vendor/vendor-vue-multiselect.216400db.js";import{P as i,a as n,b as u,c as o,d as c}from"../default-profile-image-female.0dd92339.js";import{P as d}from"../default-profile-image-male.529a2fd5.js";import{i as p}from"../vendor/vendor-core.3574f8d9.js";import{n as m}from"../_plugin-vue2_normalizer.7b9a2fe2.js";import"../vendor/vendor-others.c8ba1624.js";const f={name:"search-user",components:{Multiselect:l},props:{value:{type:[Object,Array,String]},label:{type:String,default:"Select Contact"},trackBy:{type:String,default:"uuid"},showBy:{type:String,default:"name"},error:{type:String,default:null},searchable:{type:Boolean,default:!0},allowEmpty:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},wrapperClasses:{type:String},inputClasses:{type:String,default:"mb-4"},groupValues:{type:String,default:null},groupLabel:{type:String,default:null},groupSelect:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},simple:{type:Boolean,default:!1},commaSeparatedMultiple:{type:Boolean,default:!1},addNew:{type:String},autoFocus:{type:Boolean,default:!1},optionsLimit:{type:Number,deafult:5},url:{type:String,default:"users/search"},method:{type:String,default:"get"},params:{type:Object,default(){return{}}}},data(){return{cbId:"",users:[],formErrors:{},isLoading:!1}},computed:{user:{get(){return this.value},set(a){this.$emit("input",a)}}},methods:{...p("common",["Custom"]),computedSubtitle(a){let e=a.vendor?a.vendor.name:a.brand?a.brand.name:a.company?a.company:"";return e?`(${e})`:""},computedImage(a,e){if(a.uuid==="male"){if(e){if(e.years<13)return i;if(e.years<18)return n}return d}else{if(e){if(e.years<13)return u;if(e.years<18)return o}return c}},searchContact:_.debounce(function(a){if(a.length<3)return!1;this.isLoading=!0,this.Custom({url:this.url,method:this.method,params:{q:a,...this.params}}).then(e=>{this.users=e,this.isLoading=!1}).catch(e=>{this.users=[],this.isLoading=!1,this.formErrors=formUtil.handleErrors(e)})},500),clearSelectedContact(){this.user=null,this.users=[]}},mounted(){this.autoFocus&&setTimeout(()=>{this.$refs[`multiselect${this.cbId}`].activate()},500)},created(){this.cbId=Math.random().toString(16).slice(2)}};var g=function(){var e=this,t=e._self._c;return t("div",{class:["multiselect-wrapper",{"not-empty":!!e.user},{required:e.required},e.wrapperClasses]},[t("label",{staticClass:"input-group-material-label"},[e._v(e._s(e.label)+" "),e.required?t("span",{staticClass:"required-asterix"},[e._v("*")]):e._e()]),e._t("addNew",function(){return[e.addNew?t("div",{staticClass:"add-new-link"},[t("base-button",{attrs:{type:"button",design:"link",size:"sm"},on:{click:function(s){return e.$router.push({name:e.addNew})}}},[e._v(e._s(e.$t("general.add_new")))])],1):e._e()]}),t("multiselect",{ref:`multiselect${e.cbId}`,class:["input-group-material",e.inputClasses],attrs:{options:e.users,placeholder:e.label,"track-by":e.trackBy,label:e.showBy,searchable:e.searchable,"show-labels":!1,"allow-empty":e.allowEmpty,"group-values":e.groupValues,"group-label":e.groupLabel,"group-select":e.groupSelect,multiple:e.multiple,"close-on-select":e.closeOnSelect,disabled:e.disabled,loading:e.loading||e.isLoading,"preselect-first":e.preselectFirst,"internal-search":!1,"options-limit":e.optionsLimit},on:{"search-change":e.searchContact},scopedSlots:e._u([{key:"singleLabel",fn:function({option:s}){return[t("div",{staticClass:"person-option selected"},[t("div",{staticClass:"person-image-wrapper"},[s.image?t("img",{staticClass:"person-image",attrs:{src:s.image}}):t("img",{staticClass:"person-image",attrs:{src:e.computedImage(s.gender,s.age)}})]),t("div",{staticClass:"person-details"},[t("span",{staticClass:"title"},[e._v(e._s(s.name))]),t("span",{staticClass:"subtitle"},[e._v(e._s(e.computedSubtitle(s)))])])])]}},{key:"option",fn:function({option:s}){return[t("div",{staticClass:"person-option"},[t("div",{staticClass:"person-image-wrapper"},[s.image?t("img",{staticClass:"person-image",attrs:{src:s.image}}):t("img",{staticClass:"person-image",attrs:{src:e.computedImage(s.gender,s.age)}})]),t("div",{staticClass:"person-details"},[t("span",{staticClass:"title"},[e._v(e._s(s.name))]),t("span",{staticClass:"subtitle"},[e._v(e._s(e.computedSubtitle(s)))])])])]}},{key:"clear",fn:function(s){return[e.user?t("div",{staticClass:"multiselect__clear",on:{mousedown:function(r){return r.preventDefault(),r.stopPropagation(),e.clearSelectedContact(s.search)}}}):e._e()]}},{key:"noResult",fn:function(){return[t("span",{staticClass:"text-muted"},[e._v(e._s(e.$t("global.could_not_find_any",{attribute:e.$t("user.user")})))])]},proxy:!0},{key:"noOptions",fn:function(){return[t("span",{staticClass:"text-muted"},[e._v(e._s(e.$t("general.search_helper_text")))])]},proxy:!0}]),model:{value:e.user,callback:function(s){e.user=s},expression:"user"}}),e._t("errorBlock",function(){return[e.error?t("div",{staticClass:"text-danger invalid-feedback",staticStyle:{display:"block","margin-top":"-0.5rem"}},[e._v(" "+e._s(e.error)+" ")]):e._e()]})],2)},y=[],h=m(f,g,y,!1,null,null,null,null);const k=h.exports;export{k as default};
