import{_ as i}from"../../app.a373aa59.js";import{m as a,i as o}from"../../vendor/vendor-core.3574f8d9.js";import{M as r}from"../../vendor/vendor-vue-multiselect.216400db.js";import{n}from"../../_plugin-vue2_normalizer.7b9a2fe2.js";import"../../vendor/vendor-others.c8ba1624.js";import"../../vendor/vendor-essential.91b5cfa2.js";import"../../vendor/vendor-bootstrap-vue.17129278.js";import"../../vendor/vendor-vue-gtag.f8884558.js";const u={name:"base-select",components:{Multiselect:r,AppSidebarModal:()=>i(()=>import("../../components/AppSidebarModal.38327128.js"),["assets/js/components/AppSidebarModal.38327128.js","assets/js/AppSidebar.43e19366.js","assets/js/_plugin-vue2_normalizer.7b9a2fe2.js","assets/css/AppSidebar.90cd4984.css","assets/js/vendor/vendor-core.3574f8d9.js","assets/js/vendor/vendor-others.c8ba1624.js","assets/js/event-bus.6a5776a8.js","assets/css/components/AppSidebarModal.css"])},props:{value:{type:[Object,Array,String,Number,Boolean]},label:{type:String,default:"Enter a tag"},description:{type:String,default:""},trackBy:{type:String,default:"uuid"},showBy:{type:String,default:"name"},customShowBy:{type:Function},options:{type:Array,default(){return[]}},error:{type:String,default:null},searchable:{type:Boolean,default:!0},allowEmpty:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},wrapperClasses:{type:String},inputClasses:{type:String,default:""},groupValues:{type:String,default:null},groupLabel:{type:String,default:null},groupSelect:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},simple:{type:Boolean,default:!1},commaSeparatedMultiple:{type:Boolean,default:!1},addNew:{type:String},addNewModal:{type:Boolean,default:!1},neededPermission:{type:String},pageRoute:{type:String},autoFocus:{type:Boolean,default:!1},alwaysAutoFocus:{type:Boolean,default:!1},limit:{type:Number,default:99999},max:{type:Number,default:99999}},data(){return{cbId:"",showNewModel:!1}},watch:{computedModalSidebarShow(t,e){t===!1&&setTimeout(()=>{this.showNewModel=!1},1e3)},options(t,e){this.preselectFirst&&!this.bsValue&&t&&t.length&&(this.bsValue=t[0])}},computed:{...a("config",["uiConfigs"]),...a("user",["hasPermission"]),computedModalSidebarShow(){return this.uiConfigs.modalSidebarShow},allOptions(){if(this.groupValues){let t=[];return this.options.forEach(e=>{t=t.concat(e[this.groupValues])}),t}return this.options},bsValue:{get(){if(this.value&&this.simple)if(this.multiple){if(this.commaSeparatedMultiple){const t=this.value.split(",");return this.allOptions.filter(e=>t.indexOf(e[this.trackBy])!==-1)}return this.allOptions.filter(t=>this.value.indexOf(t[this.trackBy])!==-1)}else return this.allOptions.find(t=>t[this.trackBy]===this.value);else return this.value},set(t){let e=null;t&&this.simple?this.multiple?this.commaSeparatedMultiple?e=t.map(l=>l[this.trackBy]).join(","):e=t.map(l=>l[this.trackBy]):e=t[this.trackBy]:e=t,this.$emit("input",e),e&&this.$emit("update:error","")}}},methods:{...o("config",["SetUiConfig"]),callCustomShowBy(t){if(this.customShowBy)this.customShowBy(t);else return t?t[this.showBy?this.showBy:"name"]:""},toggleNewModal:_.debounce(function(t){t&&t.target&&(t.preventDefault(),t.stopPropagation()),this.showNewModel=t!==!0,this.$nextTick(()=>{this.SetUiConfig({modalSidebarShow:this.showNewModel})})},300),focus(){setTimeout(()=>{this.$refs[`multiselect${this.cbId}`].activate()},300)}},mounted(){if(this.preselectFirst&&!this.bsValue&&this.options&&this.options.length&&(this.bsValue=this.options[0]),this.autoFocus&&(this.alwaysAutoFocus||this.alwaysAutoFocus&&!this.bsValue)){const t=this;this.$nextTick(()=>{setTimeout(()=>{t.$refs[`multiselect${t.cbId}`].activate()},500)})}},created(){this.cbId=Math.random().toString(16).slice(2)},destroyed(){}};var p=function(){var e=this,l=e._self._c;return l("div",{class:["multiselect-wrapper",{"not-empty":!!e.bsValue},e.required?"required":"",e.wrapperClasses]},[l("label",{staticClass:"input-group-material-label"},[e._v(e._s(e.label)+" "),e.required?l("span",{staticClass:"required-asterix"},[e._v("*")]):e._e()]),e._t("addNew",function(){return[e.addNew&&e.hasPermission(e.neededPermission)?l("div",{staticClass:"add-new-link"},[l("base-button",{attrs:{type:"button",design:"link",size:"sm"},on:{click:function(s){return e.$router.push({name:e.addNew})}}},[e._v(e._s(e.$t("general.add_new")))])],1):e._e()]}),e.hasPermission(e.neededPermission)?[l("div",{staticClass:"helper-links"},[e.pageRoute?l("router-link",{staticClass:"btn btn-sm btn-link",attrs:{to:{name:e.pageRoute}}},[e._v(" "+e._s(e.$t("general.view_more"))+" ")]):e._e(),e.addNewModal?l("base-button",{staticClass:"ml-2",attrs:{type:"button",design:"link",size:"sm",disabled:e.showNewModel},on:{click:e.toggleNewModal}},[e._v(e._s(e.$t("general.add_new")))]):e._e()],1),e.addNewModal&&e.showNewModel?l("app-sidebar-modal",{on:{close:function(s){return e.toggleNewModal(!0)}}},[e._t("addNewModal")],2):e._e()]:e._e(),e.$scopedSlots.selectedOption&&e.$scopedSlots.listOption?[l("multiselect",{ref:`multiselect${e.cbId}`,class:["input-group-material",e.inputClasses],attrs:{options:e.options,placeholder:e.label,"track-by":e.trackBy,label:e.showBy,"custom-label":e.customShowBy,searchable:e.searchable,"show-labels":!1,"allow-empty":e.allowEmpty,"group-values":e.groupValues,"group-label":e.groupLabel,"group-select":e.groupSelect,multiple:e.multiple,"close-on-select":e.closeOnSelect,disabled:e.disabled,loading:e.loading,limit:e.limit,max:e.multiple?e.max:!1},scopedSlots:e._u([{key:"singleLabel",fn:function({option:s}){return[e._t("selectedOption",null,{option:s})]}},{key:"option",fn:function({option:s}){return[e._t("listOption",null,{option:s})]}}],null,!0),model:{value:e.bsValue,callback:function(s){e.bsValue=s},expression:"bsValue"}})]:[l("multiselect",{ref:`multiselect${e.cbId}`,class:["input-group-material",e.inputClasses],attrs:{options:e.options,placeholder:e.label,"track-by":e.trackBy,label:e.showBy,"custom-label":e.callCustomShowBy,searchable:e.searchable,"show-labels":!1,"allow-empty":e.allowEmpty,"group-values":e.groupValues,"group-label":e.groupLabel,"group-select":e.groupSelect,multiple:e.multiple,"close-on-select":e.closeOnSelect,disabled:e.disabled,loading:e.loading,limit:e.limit,max:e.multiple?e.max:!1},model:{value:e.bsValue,callback:function(s){e.bsValue=s},expression:"bsValue"}})],e._t("infoBlock",function(){return[e.description?l("div",{staticClass:"text-sm text-right text-muted mt-1 opacity-7 m-t-n-10 px-2"},[e._v(" "+e._s(e.description)+" ")]):e._e()]}),e._t("errorBlock",function(){return[e.error?l("div",{staticClass:"text-danger invalid-feedback error-block mt-1"},[e._v(" "+e._s(e.error)+" ")]):e._e()]})],2)},d=[],c=n(u,p,d,!1,null,null,null,null);const B=c.exports;export{B as default};
