import{f as o}from"./form.90751a24.js";import{E as n}from"./EditorWrapper.2386c422.js";import{f as l}from"./modal-form.2f5baf34.js";import{n as i}from"./_plugin-vue2_normalizer.7b9a2fe2.js";import{n as m}from"./momentz.ae4aeebe.js";import{s as c}from"./app.a373aa59.js";const d={extends:l,props:{meta:{type:Object,required:!0}},data(){return{formData:{uuid:null,name:"",slug:"",description:"",parent:null,type:null},hasSlug:!1,hasParent:!1,preRequisite:{options:[]},formLabels:{name:$t("option.props.name"),slug:$t("option.props.slug"),description:$t("option.props.description"),parent:$t("option.props.parent"),type:$t("option.props.type")},initUrl:"options",dataType:"option",dataTypeArr:"options",propertyToMatch:"name",entityTitle:"option.option"}},watch:{meta:{deep:!0,handler(s,e){this.formData.type=s.optionType,this.entityTitle=s.entityTitle,this.dataType=s.dataType,this.dataTypeArr=s.dataTypeArr,this.hasSlug=s.hasSlug,this.hasParent=s.hasParent}}},methods:{createSlug(){this.showKeepAdding&&this.formData.name!=this.initialFormData.name?this.formData.slug=this.formData.name.kebabCase():this.formData.slug=this.formData.slug?this.formData.slug:this.formData.name.kebabCase()},preSubmit(){if(this.createSlug(),this.hasParent&&!this.formData.parent){this.$toasted.error($t("global.invalid",{attribute:$t("option.props.parent")}),this.$toastConfig.error);return}this.submit()}},mounted(){this.getInitialData()},created(){this.formData.type=this.meta.optionType,this.entityTitle=this.meta.entityTitle,this.dataType=this.meta.dataType,this.dataTypeArr=this.meta.dataTypeArr,this.hasSlug=this.meta.hasSlug,this.hasParent=this.meta.hasParent}};var f=function(){var e=this,t=e._self._c;return t("form",{staticClass:"has-fixed-footer",on:{submit:function(a){return a.preventDefault(),e.preSubmit.apply(null,arguments)}}},[t("h5",{staticClass:"text-center"},[e._v(e._s(e.$t("global.add",{attribute:e.$t("option.option")})))]),t("hr"),t("animated-loader",{attrs:{"is-loading":e.isLoading,"loader-color":e.vars.loaderColor}}),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 mb-4"},[t("base-input",{attrs:{"auto-focus":"",label:e.formLabels.name,type:"text",error:e.formErrors.name,required:""},on:{"update:error":function(a){return e.$set(e.formErrors,"name",a)},blur:e.createSlug},model:{value:e.formData.name,callback:function(a){e.$set(e.formData,"name",a)},expression:"formData.name"}})],1),e.hasSlug?t("div",{staticClass:"col-12 mb-4"},[t("base-input",{attrs:{label:e.formLabels.slug,type:"text",error:e.formErrors.slug,format:"kebabCase",required:""},on:{"update:error":function(a){return e.$set(e.formErrors,"slug",a)},focus:e.createSlug,blur:e.createSlug},model:{value:e.formData.slug,callback:function(a){e.$set(e.formData,"slug",a)},expression:"formData.slug"}})],1):e._e(),e.hasParent?t("div",{staticClass:"col-12 mb-4"},[t("base-select",{attrs:{options:e.preRequisite.options,label:e.formLabels.parent,error:e.formErrors.parent,"allow-empty":!0,disabled:e.isLoading,"track-by":"uuid","show-by":"nameWithParents"},on:{"update:error":function(a){return e.$set(e.formErrors,"parent",a)}},model:{value:e.formData.parent,callback:function(a){e.$set(e.formData,"parent",a)},expression:"formData.parent"}})],1):e._e(),t("div",{staticClass:"col-12 mb-4"},[t("base-input",{attrs:{label:e.formLabels.description,type:"text",error:e.formErrors.description},on:{"update:error":function(a){return e.$set(e.formErrors,"description",a)}},model:{value:e.formData.description,callback:function(a){e.$set(e.formData,"description",a)},expression:"formData.description"}})],1)]),t("div",{staticClass:"form-footer fixed-footer mt-5"},[t("div",{staticClass:"left-side"},[t("base-button",{attrs:{type:"button",design:"light",tabindex:"-1"},on:{click:function(a){return e.close()}}},[t("i",{staticClass:"fas fa-chevron-left"}),e._v(" "+e._s(e.$t("general.cancel")))])],1),t("div",{staticClass:"right-side"},[t("base-button",{attrs:{type:"submit",design:"primary"}},[t("i",{staticClass:"fas fa-save"}),e._v(" "+e._s(e.$t("global.save",{attribute:e.$t("option.option")})))])],1)])],1)},p=[],u=i(d,f,p,!1,null,null,null,null);const b=u.exports,r=c.getters["config/vars"],g={extends:o,components:{EditorWrapper:n,OptionForm:b},data(){return{formData:{uuid:null,title:"",agenda:"",description:"",startDateTime:m(r.serverDateTimeFormat),period:60,type:null,category:null,identifier:"",maxParticipantCount:1e3,accessibleViaLink:!1,hasEvent:!1,shouldRemind:!1,remindBefore:5,accessibleToMembers:!1,isPam:!1,isPaid:!1,fee:0},preRequisite:{types:[],segments:[],categories:[]},formLabels:{title:$t("meeting.props.title"),agenda:$t("meeting.props.agenda"),identifier:$t("meeting.enter_meeting_code"),maxParticipantCount:$t("meeting.config.max_participant_count"),description:$t("meeting.props.description"),startDateTime:$t("meeting.props.start_date_time"),period:$t("meeting.props.estimated_period"),type:$t("meeting.props.type"),category:$t("meeting.meeting_category.category"),accessibleViaLink:$t("meeting.props.accessible_via_link"),hasEvent:$t("meeting.props.has_event"),shouldRemind:$t("meeting.props.should_remind"),remindBefore:$t("meeting.props.remind_before"),accessibleToMembers:$t("meeting.props.only_accessible_to_members"),isPam:$t("meeting.props.is_pam"),isPaid:$t("meeting.props.is_paid"),fee:$t("meeting.props.fee"),accessibleViaLinkInfo:$t("meeting.props.accessible_via_link_info"),hasEventInfo:$t("meeting.props.has_event_info"),shouldRemindInfo:$t("meeting.props.should_remind_info"),remindBeforeInfo:$t("meeting.props.remind_before_info"),accessibleToMembersInfo:$t("meeting.props.only_accessible_to_members_info"),isPamInfo:$t("meeting.props.is_pam_info"),isPaidInfo:$t("meeting.props.is_paid_info")},initUrl:"meetings",dateTimeFields:["startDateTime"]}},computed:{maxParticipantAllowed(){return this.configs.meeting.maxParticipantCount?this.configs.meeting.maxParticipantCount:999999}},methods:{afterEditData(){this.duplicate&&(this.formData.identifier="",this.formData.startDateTime=moment().format(r.serverDateTimeFormat))},isPamChanged(){this.formData.isPam&&(this.formData.accessibleToMembers=!1,this.formData.isPaid=!1,this.formData.fee=0)},accessibleToMembersChanged(){this.formData.accessibleToMembers&&(this.formData.isPam=!1,this.formData.isPaid=!1,this.formData.fee=0)},isPaidChanged(){this.formData.isPaid&&(this.formData.isPam=!1,this.formData.accessibleToMembers=!1)}},mounted(){this.getInitialData()}};var h=function(){var e=this,t=e._self._c;return t("form",{on:{submit:function(a){return a.preventDefault(),e.submit.apply(null,arguments)}}},[t("animated-loader",{attrs:{"is-loading":e.isLoading||e.isFetching,"loader-color":e.vars.loaderColor}}),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-md-5"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 mb-3"},[t("base-input",{attrs:{"auto-focus":"",label:e.formLabels.title,type:"text",error:e.formErrors.title,required:""},on:{"update:error":function(a){return e.$set(e.formErrors,"title",a)}},model:{value:e.formData.title,callback:function(a){e.$set(e.formData,"title",a)},expression:"formData.title"}})],1),t("div",{staticClass:"col-12 mb-3"},[t("base-textarea",{attrs:{rows:"8",label:e.formLabels.agenda,error:e.formErrors.agenda,required:""},on:{"update:error":function(a){return e.$set(e.formErrors,"agenda",a)}},model:{value:e.formData.agenda,callback:function(a){e.$set(e.formData,"agenda",a)},expression:"formData.agenda"}})],1)])]),t("div",{staticClass:"col-12 col-md-7"},[t("fieldset",{staticClass:"fieldset primary"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-md-6 mb-3"},[t("base-select",{attrs:{options:e.preRequisite.types,label:e.formLabels.type,error:e.formErrors.type,required:"","allow-empty":!1,"preselect-first":""},on:{"update:error":function(a){return e.$set(e.formErrors,"type",a)}},model:{value:e.formData.type,callback:function(a){e.$set(e.formData,"type",a)},expression:"formData.type"}})],1),t("div",{staticClass:"col-12 col-md-6 mb-3"},[t("base-select",{attrs:{options:e.preRequisite.categories,label:e.formLabels.category,error:e.formErrors.category,required:"","allow-empty":!1,"preselect-first":"","add-new-modal":!0,"needed-permission":"access-meeting-config"},on:{"update:error":function(a){return e.$set(e.formErrors,"category",a)}},scopedSlots:e._u([{key:"addNewModal",fn:function(){return[t("option-form",{attrs:{meta:{optionType:"meeting_category",dataType:"category",dataTypeArr:"categories",entityTitle:"meeting.meeting_category.category"}},on:{close:e.newModalClose}})]},proxy:!0}]),model:{value:e.formData.category,callback:function(a){e.$set(e.formData,"category",a)},expression:"formData.category"}})],1),t("div",{staticClass:"col-12 col-md-6 mb-3"},[t("base-input",{staticClass:"mb-3",attrs:{label:e.formLabels.startDateTime,"addon-right-icon":"far fa-calendar-alt",type:"text",error:e.formErrors.startDateTime,"is-wrapper":!0,required:""},on:{"update:error":function(a){return e.$set(e.formErrors,"startDateTime",a)}},model:{value:e.formData.startDateTime,callback:function(a){e.$set(e.formData,"startDateTime",a)},expression:"formData.startDateTime"}},[t("date-picker",{staticClass:"form-control datepicker",attrs:{config:e.vars.datetimepickerConfig},model:{value:e.formData.startDateTime,callback:function(a){e.$set(e.formData,"startDateTime",a)},expression:"formData.startDateTime"}})],1)],1),t("div",{staticClass:"col-12 col-md-6 mb-3"},[t("base-input",{staticClass:"mb-3",attrs:{label:e.formLabels.period,type:"number",error:e.formErrors.period,required:"","select-on-focus":"","addon-right-text":e.$t("list.general.durations.minutes")},on:{"update:error":function(a){return e.$set(e.formErrors,"period",a)},wheel:function(a){a.stopPropagation(),a.preventDefault()}},model:{value:e.formData.period,callback:function(a){e.$set(e.formData,"period",a)},expression:"formData.period"}})],1),t("div",{staticClass:"col-12 col-md-6 mb-3"},[t("base-input",{attrs:{label:e.formLabels.identifier,type:"text",error:e.formErrors.identifier},on:{"update:error":function(a){return e.$set(e.formErrors,"identifier",a)}},model:{value:e.formData.identifier,callback:function(a){e.$set(e.formData,"identifier",a)},expression:"formData.identifier"}})],1),t("div",{staticClass:"col-12 col-md-6 mb-3"},[t("base-input",{attrs:{label:e.formLabels.maxParticipantCount,type:"number",error:e.formErrors.maxParticipantCount,min:2,max:e.maxParticipantAllowed,step:1},on:{"update:error":function(a){return e.$set(e.formErrors,"maxParticipantCount",a)}},model:{value:e.formData.maxParticipantCount,callback:function(a){e.$set(e.formData,"maxParticipantCount",a)},expression:"formData.maxParticipantCount"}})],1)])])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-md-8 mt-element"},[t("editor-wrapper",{attrs:{label:e.formLabels.description,error:e.formErrors.description,height:"full"},on:{"update:error":function(a){return e.$set(e.formErrors,"description",a)}},model:{value:e.formData.description,callback:function(a){e.$set(e.formData,"description",a)},expression:"formData.description"}})],1),t("div",{staticClass:"col-12 col-md-4 mt-element"},[t("fieldset",{staticClass:"fieldset light h-100"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 mb-3"},[t("base-checkbox",{staticClass:"ml-3 mt-2",model:{value:e.formData.accessibleViaLink,callback:function(a){e.$set(e.formData,"accessibleViaLink",a)},expression:"formData.accessibleViaLink"}},[e._v(" "+e._s(e.formLabels.accessibleViaLink)+" ")]),t("p",{staticClass:"text-muted opacity-7 text-sm ml-3 mb-0"},[e._v(e._s(e.formLabels.accessibleViaLinkInfo))])],1),t("div",{staticClass:"col-12 mb-3"},[t("base-checkbox",{staticClass:"ml-3 mt-2",model:{value:e.formData.hasEvent,callback:function(a){e.$set(e.formData,"hasEvent",a)},expression:"formData.hasEvent"}},[e._v(" "+e._s(e.formLabels.hasEvent)+" ")]),t("p",{staticClass:"text-muted opacity-7 text-sm ml-3 mb-0"},[e._v(e._s(e.formLabels.hasEventInfo))])],1),t("div",{staticClass:"col-12 mb-3"},[t("base-checkbox",{staticClass:"ml-3 mt-2",model:{value:e.formData.shouldRemind,callback:function(a){e.$set(e.formData,"shouldRemind",a)},expression:"formData.shouldRemind"}},[e._v(" "+e._s(e.formLabels.shouldRemind)+" ")]),t("p",{staticClass:"text-muted opacity-7 text-sm ml-3 mb-0"},[e._v(e._s(e.formLabels.shouldRemindInfo))])],1),e.formData.shouldRemind?t("div",{staticClass:"col-12 mb-3 px-4"},[t("base-input",{attrs:{label:e.formLabels.remindBefore,type:"number",error:e.formErrors.remindBefore,min:1,step:1,"addon-right-text":e.$t("list.general.durations.minutes")},on:{"update:error":function(a){return e.$set(e.formErrors,"remindBefore",a)}},model:{value:e.formData.remindBefore,callback:function(a){e.$set(e.formData,"remindBefore",a)},expression:"formData.remindBefore"}})],1):e._e(),e.configs.meeting&&e.configs.meeting.enablePam&&!e.formData.accessibleToMembers&&!e.formData.isPaid?t("div",{staticClass:"col-12 mb-3"},[t("base-checkbox",{staticClass:"ml-3 mt-2",on:{change:e.isPamChanged},model:{value:e.formData.isPam,callback:function(a){e.$set(e.formData,"isPam",a)},expression:"formData.isPam"}},[e._v(" "+e._s(e.formLabels.isPam)+" ")]),t("p",{staticClass:"text-muted opacity-7 text-sm ml-3 mb-0"},[e._v(e._s(e.formLabels.isPamInfo))])],1):e._e()]),e.allowExtraInput&&!e.formData.isPam?[e.formData.isPaid?e._e():t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 mb-3"},[t("base-checkbox",{staticClass:"ml-3 mt-2",on:{change:e.accessibleToMembersChanged},model:{value:e.formData.accessibleToMembers,callback:function(a){e.$set(e.formData,"accessibleToMembers",a)},expression:"formData.accessibleToMembers"}},[e._v(" "+e._s(e.formLabels.accessibleToMembers)+" ")]),t("p",{staticClass:"text-muted opacity-7 text-sm ml-3 mb-0"},[e._v(e._s(e.formLabels.accessibleToMembersInfo))])],1)]),e.configs.meeting.enablePaidMeeting&&!e.formData.accessibleToMembers?t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 mb-3"},[t("base-checkbox",{staticClass:"ml-3 mt-2",on:{change:e.isPaidChanged},model:{value:e.formData.isPaid,callback:function(a){e.$set(e.formData,"isPaid",a)},expression:"formData.isPaid"}},[e._v(" "+e._s(e.formLabels.isPaid)+" ")]),t("p",{staticClass:"text-muted opacity-7 text-sm ml-3 mb-0"},[e._v(e._s(e.formLabels.isPaidInfo))])],1),e.formData.isPaid?t("div",{staticClass:"col-12 mb-3 px-4"},[t("base-input",{attrs:{label:e.formLabels.fee,type:"number",error:e.formErrors.fee,min:.01,step:.01,format:"currency"},on:{"update:error":function(a){return e.$set(e.formErrors,"fee",a)}},model:{value:e.formData.fee,callback:function(a){e.$set(e.formData,"fee",a)},expression:"formData.fee"}})],1):e._e()]):e._e()]:e._e()],2)])]),e.formHasErrors?t("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t("h6",{staticClass:"m-0"},[e._v(e._s(e.$t("general.form_has_errors")))])]):e._e(),t("div",{staticClass:"form-footer mt-5"},[t("div",{staticClass:"left-side"},[t("base-button",{attrs:{type:"button",design:"light",tabindex:"-1"},on:{click:function(a){return e.$router.back()}}},[t("i",{staticClass:"fas fa-chevron-left"}),e._v(" "+e._s(e.$t("general.cancel")))]),e.showKeepAdding?t("base-checkbox",{staticClass:"ml-3 mt-2",model:{value:e.keepAdding,callback:function(a){e.keepAdding=a},expression:"keepAdding"}},[e._v(" "+e._s(e.$t("general.keep_adding"))+" ")]):e._e()],1),t("div",{staticClass:"right-side"},[t("base-button",{attrs:{type:"button",design:"light"},on:{click:e.reset}},[e._v(e._s(e.$t("general.reset")))]),t("base-button",{attrs:{type:"submit",design:"primary"}},[e._v(e._s(e.$t("global.save",{attribute:e.$t("meeting.meeting")})))])],1)]),e.showKeepAdding&&e.keepAdding?[t("keep-adding-form",{attrs:{"keep-adding-fields":e.keepAddingFields,"keep-adding-option":e.keepAddingOption,"keep-adding-selected-fields":e.keepAddingSelectedFields,"is-loading":e.isLoading},on:{optionUpdated:function(a){e.keepAddingOption=a},fieldsUpdated:function(a){e.keepAddingSelectedFields=a}}})]:e._e()],2)},v=[],D=i(g,h,v,!1,null,null,null,null);const P=D.exports;export{P as C};
