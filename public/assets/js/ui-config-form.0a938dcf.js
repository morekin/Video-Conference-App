import{G as d,n as h,o as g}from"./app.a373aa59.js";import{C as c,m as f,i as n}from"./vendor/vendor-core.3574f8d9.js";const m={components:{CollapseTransition:c},data(){return{formData:{...d,type:"ui"},actions:{leftSidebarStyle:{"push-content":{leftSidebarBackdrop:!1,leftSidebarShadow:!1,leftSidebarShow:!1},push:{leftSidebarShow:!1},over:{leftSidebarBackdrop:!0,leftSidebarShadow:!0,leftSidebarShow:!1},folded:{leftSidebarBackdrop:!0,leftSidebarShow:!1},"off-canvas":{leftSidebarShow:!1}},topNavbarHide:{true:{leftSidebarHeight:"full"}},leftSidebarHeight:{normal:{topNavbarHide:!1}},pageHeaderIsBoxed:{true:{pageHeaderBackgroundColor:"primary",colorScheme:"custom"}},pageHeaderBackgroundColor:{transparent:{pageHeaderIsBoxed:!1},any:{colorScheme:"custom"}},pageBackgroundColor:{any:{colorScheme:"custom"}},pageContainerBackgroundColor:{any:{colorScheme:"custom"}},leftSidebarColor:{any:{colorScheme:"custom"}},rightSidebarColor:{any:{colorScheme:"custom"}},modalSidebarColor:{any:{colorScheme:"custom"}},specialSidebarColor:{any:{colorScheme:"custom"}},topNavbarColor:{any:{colorScheme:"custom"}},colorScheme:{default:{pageBackgroundColor:"light",pageContainerBackgroundColor:"white",pageHeaderBackgroundColor:"transparent",leftSidebarColor:"dark-primary",leftSidebarLogoLight:!0,rightSidebarColor:"white",modalSidebarColor:"white",specialSidebarColor:"secondary",topNavbarColor:"black",topNavbarLogoLight:!0},white:{pageBackgroundColor:"white",pageContainerBackgroundColor:"white",pageHeaderBackgroundColor:"transparent",leftSidebarColor:"white",leftSidebarLogoLight:!1,rightSidebarColor:"white",modalSidebarColor:"white",specialSidebarColor:"white",topNavbarColor:"white",topNavbarLogoLight:!1},light:{pageBackgroundColor:"light",pageContainerBackgroundColor:"white",pageHeaderBackgroundColor:"transparent",leftSidebarColor:"white",leftSidebarLogoLight:!1,rightSidebarColor:"white",modalSidebarColor:"white",specialSidebarColor:"light",topNavbarColor:"white",topNavbarLogoLight:!1},dark:{pageBackgroundColor:"black",pageContainerBackgroundColor:"gray-darkest",pageHeaderBackgroundColor:"transparent",leftSidebarColor:"gray-darkest",leftSidebarLogoLight:!0,rightSidebarColor:"gray-darkest",modalSidebarColor:"black",specialSidebarColor:"black",topNavbarColor:"gray-darkest",topNavbarLogoLight:!0},"semi-dark":{pageBackgroundColor:"gray-darkest",pageContainerBackgroundColor:"gray-darker",pageHeaderBackgroundColor:"transparent",leftSidebarColor:"dark-primary",leftSidebarLogoLight:!0,rightSidebarColor:"gray-darker",modalSidebarColor:"gray-darker",specialSidebarColor:"primary",topNavbarColor:"black",topNavbarLogoLight:!0},casual:{pageBackgroundColor:"light",pageContainerBackgroundColor:"white",pageHeaderBackgroundColor:"transparent",leftSidebarColor:"primary",leftSidebarLogoLight:!0,rightSidebarColor:"white",modalSidebarColor:"white",specialSidebarColor:"success",topNavbarColor:"dark-primary",topNavbarLogoLight:!0},business:{pageBackgroundColor:"light",pageContainerBackgroundColor:"white",pageHeaderBackgroundColor:"transparent",leftSidebarColor:"gray-darkest",leftSidebarLogoLight:!0,rightSidebarColor:"white",modalSidebarColor:"white",specialSidebarColor:"white",topNavbarColor:"white",topNavbarLogoLight:!1}}},formErrors:{},preRequisite:{},colors:[{key:"primary",title:"Primary"},{key:"dark-primary",title:"Dark Primary"},{key:"secondary",title:"Secondary"},{key:"success",title:"Success"},{key:"info",title:"Info"},{key:"warning",title:"Warning"},{key:"danger",title:"Danger"},{key:"white",title:"White"},{key:"light",title:"Light"},{key:"dark",title:"Dark"},{key:"gray-darker",title:"Darker"},{key:"gray-darkest",title:"Darkest"},{key:"black",title:"Black"}],colorSchemes:[{key:"default",title:"Default"},{key:"white",title:"White"},{key:"light",title:"Light"},{key:"dark",title:"Dark"},{key:"semi-dark",title:"Semi Dark"},{key:"casual",title:"Casual"},{key:"business",title:"Business"}],initialFormData:null,emptyFormData:null,readyForAction:!1,isLoading:!0,getInitialDataCalled:!1}},computed:{...f("config",["vars","uiConfigs"]),computedFormData(){return _.cloneDeep(this.formData)}},watch:{computedFormData:{deep:!0,handler:_.debounce(function(e,a){this.readyForAction&&(e=this.processActions(e,a),this.formData.objForEach((r,t)=>{this.formData[t]=e[t]}),this.SetUiConfig(e)),typeof this.afterSettingConfig=="function"&&this.$nextTick(()=>{this.afterSettingConfig()}),this.readyForAction=!0},500)}},methods:{...n("config",["GetConfig"]),...n("config",["SetUiConfig"]),processActions(e,a){return this.actions.objForEach((r,t)=>{if(e[t]!==a[t]){const l=r[e[t]];l&&l.objForEach((o,i)=>{e[i]=o});const s=r.any;s&&s.objForEach((o,i)=>{e[i]=o})}}),e},findActualValue(e,a,r="uuid"){return a.find(t=>t[r]===e)||null},submit(){if(formUtil.isUnchanged(this.initialFormData,this.formData))return this.$toasted.info(this.$t("general.nothing_changed"),this.$toastConfig.info),!1;this.isLoading=!0,h(this.formData).then(e=>{this.GetConfig().then(()=>{this.isLoading=!1,this.getInitialDataCalled&&this.getInitialData(),this.$toasted.success(e.message,this.$toastConfig.success),this.initialFormData=Object.assign({},this.formData)}).catch(a=>{this.isLoading=!1,formUtil.handleErrors(a)})}).catch(e=>{this.isLoading=!1,this.formErrors=formUtil.handleErrors(e)})},reset(){formUtil.confirmAction().then(e=>{e.value&&(this.formData=Object.assign({},this.formData,_.cloneDeep(this.initialFormData)))})},unsavedCheck(e){formUtil.unsavedCheckAlert(this.initialFormData,this.formData,a=>{a?(this.SetUiConfig(this.initialFormData),e()):a!==!1&&e()})},fillPreRequisite(e){this.preRequisite.objForEach((a,r)=>{this.preRequisite[r]=e.hasOwnProperty(r)?e[r]:a}),this.isLoading=!1},fillFormData(){this.isLoading=!0,this.uiConfigs&&(this.formData=formUtil.assignValues(this.formData,this.uiConfigs)),this.isLoading=!1},async getInitialData(e){this.isLoading=!0,this.getInitialDataCalled=!0;try{const a=await g(Object.keys(this.preRequisite).join(","));return this.fillPreRequisite(a),e&&this.$nextTick(()=>{e()}),a}catch(a){throw this.isLoading=!1,this.formErrors=formUtil.handleErrors(a),a}}},mounted(){this.fillFormData(),this.initialFormData=_.cloneDeep(this.formData)},beforeDestroy(){delete this.formData,delete this.formErrors,delete this.preRequisite},beforeRouteLeave(e,a,r){this.unsavedCheck(r)}};export{m as f};
