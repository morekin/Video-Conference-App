function W(z){throw new Error('Could not dynamically require "'+z+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var V={exports:{}};(function(z,J){(function(L){z.exports=L()})(function(){return function(){function L(U,P,x){function f(a,u){if(!P[a]){if(!U[a]){var S=typeof W=="function"&&W;if(!u&&S)return S(a,!0);if(r)return r(a,!0);var b=new Error("Cannot find module '"+a+"'");throw b.code="MODULE_NOT_FOUND",b}var T=P[a]={exports:{}};U[a][0].call(T.exports,function(k){var E=U[a][1][k];return f(E||k)},T,T.exports,L,U,P,x)}return P[a].exports}for(var r=typeof W=="function"&&W,t=0;t<x.length;t++)f(x[t]);return f}return L}()({1:[function(L,U,P){var x=L("./adapter_factory.js"),f=(0,x.adapterFactory)({window:typeof window>"u"?void 0:window});U.exports=f},{"./adapter_factory.js":2}],2:[function(L,U,P){function x(E){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},x(E)}Object.defineProperty(P,"__esModule",{value:!0}),P.adapterFactory=k;var f=T(L("./utils")),r=T(L("./chrome/chrome_shim")),t=T(L("./firefox/firefox_shim")),a=T(L("./safari/safari_shim")),u=T(L("./common_shim")),S=T(L("sdp"));function b(E){if(typeof WeakMap!="function")return null;var v=new WeakMap,D=new WeakMap;return(b=function(i){return i?D:v})(E)}function T(E,v){if(!v&&E&&E.__esModule)return E;if(E===null||x(E)!=="object"&&typeof E!="function")return{default:E};var D=b(v);if(D&&D.has(E))return D.get(E);var p={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in E)if(c!=="default"&&Object.prototype.hasOwnProperty.call(E,c)){var l=i?Object.getOwnPropertyDescriptor(E,c):null;l&&(l.get||l.set)?Object.defineProperty(p,c,l):p[c]=E[c]}return p.default=E,D&&D.set(E,p),p}function k(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=E.window,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},p=f.log,i=f.detectBrowser(v),c={browserDetails:i,commonShim:u,extractVersion:f.extractVersion,disableLog:f.disableLog,disableWarnings:f.disableWarnings,sdp:S};switch(i.browser){case"chrome":if(!r||!r.shimPeerConnection||!D.shimChrome)return p("Chrome shim is not included in this adapter release."),c;if(i.version===null)return p("Chrome shim can not determine version, not shimming."),c;p("adapter.js shimming chrome."),c.browserShim=r,u.shimAddIceCandidateNullOrEmpty(v,i),u.shimParameterlessSetLocalDescription(v,i),r.shimGetUserMedia(v,i),r.shimMediaStream(v,i),r.shimPeerConnection(v,i),r.shimOnTrack(v,i),r.shimAddTrackRemoveTrack(v,i),r.shimGetSendersWithDtmf(v,i),r.shimGetStats(v,i),r.shimSenderReceiverGetStats(v,i),r.fixNegotiationNeeded(v,i),u.shimRTCIceCandidate(v,i),u.shimRTCIceCandidateRelayProtocol(v,i),u.shimConnectionState(v,i),u.shimMaxMessageSize(v,i),u.shimSendThrowTypeError(v,i),u.removeExtmapAllowMixed(v,i);break;case"firefox":if(!t||!t.shimPeerConnection||!D.shimFirefox)return p("Firefox shim is not included in this adapter release."),c;p("adapter.js shimming firefox."),c.browserShim=t,u.shimAddIceCandidateNullOrEmpty(v,i),u.shimParameterlessSetLocalDescription(v,i),t.shimGetUserMedia(v,i),t.shimPeerConnection(v,i),t.shimOnTrack(v,i),t.shimRemoveStream(v,i),t.shimSenderGetStats(v,i),t.shimReceiverGetStats(v,i),t.shimRTCDataChannel(v,i),t.shimAddTransceiver(v,i),t.shimGetParameters(v,i),t.shimCreateOffer(v,i),t.shimCreateAnswer(v,i),u.shimRTCIceCandidate(v,i),u.shimConnectionState(v,i),u.shimMaxMessageSize(v,i),u.shimSendThrowTypeError(v,i);break;case"safari":if(!a||!D.shimSafari)return p("Safari shim is not included in this adapter release."),c;p("adapter.js shimming safari."),c.browserShim=a,u.shimAddIceCandidateNullOrEmpty(v,i),u.shimParameterlessSetLocalDescription(v,i),a.shimRTCIceServerUrls(v,i),a.shimCreateOfferLegacy(v,i),a.shimCallbacksAPI(v,i),a.shimLocalStreamsAPI(v,i),a.shimRemoteStreamsAPI(v,i),a.shimTrackEventTransceiver(v,i),a.shimGetUserMedia(v,i),a.shimAudioContext(v,i),u.shimRTCIceCandidate(v,i),u.shimRTCIceCandidateRelayProtocol(v,i),u.shimMaxMessageSize(v,i),u.shimSendThrowTypeError(v,i),u.removeExtmapAllowMixed(v,i);break;default:p("Unsupported browser!");break}return c}},{"./chrome/chrome_shim":3,"./common_shim":6,"./firefox/firefox_shim":7,"./safari/safari_shim":10,"./utils":11,sdp:12}],3:[function(L,U,P){Object.defineProperty(P,"__esModule",{value:!0}),P.fixNegotiationNeeded=o,P.shimAddTrackRemoveTrack=c,P.shimAddTrackRemoveTrackWithNative=i,Object.defineProperty(P,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}}),P.shimGetSendersWithDtmf=v,P.shimGetStats=D,Object.defineProperty(P,"shimGetUserMedia",{enumerable:!0,get:function(){return f.shimGetUserMedia}}),P.shimMediaStream=k,P.shimOnTrack=E,P.shimPeerConnection=l,P.shimSenderReceiverGetStats=p;var x=a(L("../utils.js")),f=L("./getusermedia"),r=L("./getdisplaymedia");function t(e){if(typeof WeakMap!="function")return null;var s=new WeakMap,d=new WeakMap;return(t=function(_){return _?d:s})(e)}function a(e,s){if(!s&&e&&e.__esModule)return e;if(e===null||T(e)!=="object"&&typeof e!="function")return{default:e};var d=t(s);if(d&&d.has(e))return d.get(e);var R={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in e)if(C!=="default"&&Object.prototype.hasOwnProperty.call(e,C)){var y=_?Object.getOwnPropertyDescriptor(e,C):null;y&&(y.get||y.set)?Object.defineProperty(R,C,y):R[C]=e[C]}return R.default=e,d&&d.set(e,R),R}function u(e,s,d){return s=S(s),s in e?Object.defineProperty(e,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):e[s]=d,e}function S(e){var s=b(e,"string");return T(s)==="symbol"?s:String(s)}function b(e,s){if(T(e)!=="object"||e===null)return e;var d=e[Symbol.toPrimitive];if(d!==void 0){var R=d.call(e,s||"default");if(T(R)!=="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function T(e){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},T(e)}function k(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function E(e){if(T(e)==="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(R){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=R)},enumerable:!0,configurable:!0});var s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var R=this;return this._ontrackpoly||(this._ontrackpoly=function(_){_.stream.addEventListener("addtrack",function(C){var y;e.RTCPeerConnection.prototype.getReceivers?y=R.getReceivers().find(function(m){return m.track&&m.track.id===C.track.id}):y={track:C.track};var n=new Event("track");n.track=C.track,n.receiver=y,n.transceiver={receiver:y},n.streams=[_.stream],R.dispatchEvent(n)}),_.stream.getTracks().forEach(function(C){var y;e.RTCPeerConnection.prototype.getReceivers?y=R.getReceivers().find(function(m){return m.track&&m.track.id===C.id}):y={track:C};var n=new Event("track");n.track=C,n.receiver=y,n.transceiver={receiver:y},n.streams=[_.stream],R.dispatchEvent(n)})},this.addEventListener("addstream",this._ontrackpoly)),s.apply(this,arguments)}}else x.wrapPeerConnectionEvent(e,"track",function(d){return d.transceiver||Object.defineProperty(d,"transceiver",{value:{receiver:d.receiver}}),d})}function v(e){if(T(e)==="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var s=function(m,g){return{track:g,get dtmf(){return this._dtmf===void 0&&(g.kind==="audio"?this._dtmf=m.createDTMFSender(g):this._dtmf=null),this._dtmf},_pc:m}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var d=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(m,g){var h=d.apply(this,arguments);return h||(h=s(this,m),this._senders.push(h)),h};var R=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(m){R.apply(this,arguments);var g=this._senders.indexOf(m);g!==-1&&this._senders.splice(g,1)}}var _=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(m){var g=this;this._senders=this._senders||[],_.apply(this,[m]),m.getTracks().forEach(function(h){g._senders.push(s(g,h))})};var C=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(m){var g=this;this._senders=this._senders||[],C.apply(this,[m]),m.getTracks().forEach(function(h){var O=g._senders.find(function(M){return M.track===h});O&&g._senders.splice(g._senders.indexOf(O),1)})}}else if(T(e)==="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var y=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var m=this,g=y.apply(this,[]);return g.forEach(function(h){return h._pc=m}),g},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function D(e){if(!!e.RTCPeerConnection){var s=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var R=this,_=Array.prototype.slice.call(arguments),C=_[0],y=_[1],n=_[2];if(arguments.length>0&&typeof C=="function")return s.apply(this,arguments);if(s.length===0&&(arguments.length===0||typeof C!="function"))return s.apply(this,[]);var m=function(M){var I={},G=M.result();return G.forEach(function(A){var N={id:A.id,timestamp:A.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[A.type]||A.type};A.names().forEach(function(F){N[F]=A.stat(F)}),I[N.id]=N}),I},g=function(M){return new Map(Object.keys(M).map(function(I){return[I,M[I]]}))};if(arguments.length>=2){var h=function(M){y(g(m(M)))};return s.apply(this,[h,C])}return new Promise(function(O,M){s.apply(R,[function(I){O(g(m(I)))},M])}).then(y,n)}}}function p(e){if(!!(T(e)==="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver)){if(!("getStats"in e.RTCRtpSender.prototype)){var s=e.RTCPeerConnection.prototype.getSenders;s&&(e.RTCPeerConnection.prototype.getSenders=function(){var y=this,n=s.apply(this,[]);return n.forEach(function(m){return m._pc=y}),n});var d=e.RTCPeerConnection.prototype.addTrack;d&&(e.RTCPeerConnection.prototype.addTrack=function(){var y=d.apply(this,arguments);return y._pc=this,y}),e.RTCRtpSender.prototype.getStats=function(){var y=this;return this._pc.getStats().then(function(n){return x.filterStats(n,y.track,!0)})}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var R=e.RTCPeerConnection.prototype.getReceivers;R&&(e.RTCPeerConnection.prototype.getReceivers=function(){var y=this,n=R.apply(this,[]);return n.forEach(function(m){return m._pc=y}),n}),x.wrapPeerConnectionEvent(e,"track",function(C){return C.receiver._pc=C.srcElement,C}),e.RTCRtpReceiver.prototype.getStats=function(){var y=this;return this._pc.getStats().then(function(n){return x.filterStats(n,y.track,!1)})}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var _=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var y=arguments[0],n,m,g;return this.getSenders().forEach(function(h){h.track===y&&(n?g=!0:n=h)}),this.getReceivers().forEach(function(h){return h.track===y&&(m?g=!0:m=h),h.track===y}),g||n&&m?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():m?m.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return _.apply(this,arguments)}}}}function i(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var y=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(n){return y._shimmedLocalStreams[n][0]})};var s=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(y,n){if(!n)return s.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var m=s.apply(this,arguments);return this._shimmedLocalStreams[n.id]?this._shimmedLocalStreams[n.id].indexOf(m)===-1&&this._shimmedLocalStreams[n.id].push(m):this._shimmedLocalStreams[n.id]=[n,m],m};var d=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(y){var n=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},y.getTracks().forEach(function(h){var O=n.getSenders().find(function(M){return M.track===h});if(O)throw new DOMException("Track already exists.","InvalidAccessError")});var m=this.getSenders();d.apply(this,arguments);var g=this.getSenders().filter(function(h){return m.indexOf(h)===-1});this._shimmedLocalStreams[y.id]=[y].concat(g)};var R=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(y){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[y.id],R.apply(this,arguments)};var _=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(y){var n=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},y&&Object.keys(this._shimmedLocalStreams).forEach(function(m){var g=n._shimmedLocalStreams[m].indexOf(y);g!==-1&&n._shimmedLocalStreams[m].splice(g,1),n._shimmedLocalStreams[m].length===1&&delete n._shimmedLocalStreams[m]}),_.apply(this,arguments)}}function c(e,s){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&s.version>=65)return i(e);var d=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var h=this,O=d.apply(this);return this._reverseStreams=this._reverseStreams||{},O.map(function(M){return h._reverseStreams[M.id]})};var R=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(h){var O=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(function(I){var G=O.getSenders().find(function(A){return A.track===I});if(G)throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){var M=new e.MediaStream(h.getTracks());this._streams[h.id]=M,this._reverseStreams[M.id]=h,h=M}R.apply(this,[h])};var _=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},_.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},e.RTCPeerConnection.prototype.addTrack=function(h,O){var M=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var I=[].slice.call(arguments,1);if(I.length!==1||!I[0].getTracks().find(function(F){return F===h}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var G=this.getSenders().find(function(F){return F.track===h});if(G)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var A=this._streams[O.id];if(A)A.addTrack(h),Promise.resolve().then(function(){M.dispatchEvent(new Event("negotiationneeded"))});else{var N=new e.MediaStream([h]);this._streams[O.id]=N,this._reverseStreams[N.id]=O,this.addStream(N)}return this.getSenders().find(function(F){return F.track===h})};function C(g,h){var O=h.sdp;return Object.keys(g._reverseStreams||[]).forEach(function(M){var I=g._reverseStreams[M],G=g._streams[I.id];O=O.replace(new RegExp(G.id,"g"),I.id)}),new RTCSessionDescription({type:h.type,sdp:O})}function y(g,h){var O=h.sdp;return Object.keys(g._reverseStreams||[]).forEach(function(M){var I=g._reverseStreams[M],G=g._streams[I.id];O=O.replace(new RegExp(I.id,"g"),G.id)}),new RTCSessionDescription({type:h.type,sdp:O})}["createOffer","createAnswer"].forEach(function(g){var h=e.RTCPeerConnection.prototype[g],O=u({},g,function(){var M=this,I=arguments,G=arguments.length&&typeof arguments[0]=="function";return G?h.apply(this,[function(A){var N=C(M,A);I[0].apply(null,[N])},function(A){I[1]&&I[1].apply(null,A)},arguments[2]]):h.apply(this,arguments).then(function(A){return C(M,A)})});e.RTCPeerConnection.prototype[g]=O[g]});var n=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?n.apply(this,arguments):(arguments[0]=y(this,arguments[0]),n.apply(this,arguments))};var m=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var h=m.get.apply(this);return h.type===""?h:C(this,h)}}),e.RTCPeerConnection.prototype.removeTrack=function(h){var O=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");var M=h._pc===this;if(!M)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var I;Object.keys(this._streams).forEach(function(G){var A=O._streams[G].getTracks().find(function(N){return h.track===N});A&&(I=O._streams[G])}),I&&(I.getTracks().length===1?this.removeStream(this._reverseStreams[I.id]):I.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function l(e,s){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),!!e.RTCPeerConnection&&s.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(d){var R=e.RTCPeerConnection.prototype[d],_=u({},d,function(){return arguments[0]=new(d==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),R.apply(this,arguments)});e.RTCPeerConnection.prototype[d]=_[d]})}function o(e,s){x.wrapPeerConnectionEvent(e,"negotiationneeded",function(d){var R=d.target;if(!((s.version<72||R.getConfiguration&&R.getConfiguration().sdpSemantics==="plan-b")&&R.signalingState!=="stable"))return d})}},{"../utils.js":11,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(L,U,P){Object.defineProperty(P,"__esModule",{value:!0}),P.shimGetDisplayMedia=x;function x(f,r){if(!(f.navigator.mediaDevices&&"getDisplayMedia"in f.navigator.mediaDevices)&&!!f.navigator.mediaDevices){if(typeof r!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}f.navigator.mediaDevices.getDisplayMedia=function(a){return r(a).then(function(u){var S=a.video&&a.video.width,b=a.video&&a.video.height,T=a.video&&a.video.frameRate;return a.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:u,maxFrameRate:T||3}},S&&(a.video.mandatory.maxWidth=S),b&&(a.video.mandatory.maxHeight=b),f.navigator.mediaDevices.getUserMedia(a)})}}}},{}],5:[function(L,U,P){Object.defineProperty(P,"__esModule",{value:!0}),P.shimGetUserMedia=u;var x=r(L("../utils.js"));function f(S){if(typeof WeakMap!="function")return null;var b=new WeakMap,T=new WeakMap;return(f=function(E){return E?T:b})(S)}function r(S,b){if(!b&&S&&S.__esModule)return S;if(S===null||t(S)!=="object"&&typeof S!="function")return{default:S};var T=f(b);if(T&&T.has(S))return T.get(S);var k={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in S)if(v!=="default"&&Object.prototype.hasOwnProperty.call(S,v)){var D=E?Object.getOwnPropertyDescriptor(S,v):null;D&&(D.get||D.set)?Object.defineProperty(k,v,D):k[v]=S[v]}return k.default=S,T&&T.set(S,k),k}function t(S){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},t(S)}var a=x.log;function u(S,b){var T=S&&S.navigator;if(!!T.mediaDevices){var k=function(c){if(t(c)!=="object"||c.mandatory||c.optional)return c;var l={};return Object.keys(c).forEach(function(o){if(!(o==="require"||o==="advanced"||o==="mediaSource")){var e=t(c[o])==="object"?c[o]:{ideal:c[o]};e.exact!==void 0&&typeof e.exact=="number"&&(e.min=e.max=e.exact);var s=function(_,C){return _?_+C.charAt(0).toUpperCase()+C.slice(1):C==="deviceId"?"sourceId":C};if(e.ideal!==void 0){l.optional=l.optional||[];var d={};typeof e.ideal=="number"?(d[s("min",o)]=e.ideal,l.optional.push(d),d={},d[s("max",o)]=e.ideal,l.optional.push(d)):(d[s("",o)]=e.ideal,l.optional.push(d))}e.exact!==void 0&&typeof e.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[s("",o)]=e.exact):["min","max"].forEach(function(R){e[R]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[s(R,o)]=e[R])})}}),c.advanced&&(l.optional=(l.optional||[]).concat(c.advanced)),l},E=function(c,l){if(b.version>=61)return l(c);if(c=JSON.parse(JSON.stringify(c)),c&&t(c.audio)==="object"){var o=function(_,C,y){C in _&&!(y in _)&&(_[y]=_[C],delete _[C])};c=JSON.parse(JSON.stringify(c)),o(c.audio,"autoGainControl","googAutoGainControl"),o(c.audio,"noiseSuppression","googNoiseSuppression"),c.audio=k(c.audio)}if(c&&t(c.video)==="object"){var e=c.video.facingMode;e=e&&(t(e)==="object"?e:{ideal:e});var s=b.version<66;if(e&&(e.exact==="user"||e.exact==="environment"||e.ideal==="user"||e.ideal==="environment")&&!(T.mediaDevices.getSupportedConstraints&&T.mediaDevices.getSupportedConstraints().facingMode&&!s)){delete c.video.facingMode;var d;if(e.exact==="environment"||e.ideal==="environment"?d=["back","rear"]:(e.exact==="user"||e.ideal==="user")&&(d=["front"]),d)return T.mediaDevices.enumerateDevices().then(function(R){R=R.filter(function(C){return C.kind==="videoinput"});var _=R.find(function(C){return d.some(function(y){return C.label.toLowerCase().includes(y)})});return!_&&R.length&&d.includes("back")&&(_=R[R.length-1]),_&&(c.video.deviceId=e.exact?{exact:_.deviceId}:{ideal:_.deviceId}),c.video=k(c.video),a("chrome: "+JSON.stringify(c)),l(c)})}c.video=k(c.video)}return a("chrome: "+JSON.stringify(c)),l(c)},v=function(c){return b.version>=64?c:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[c.name]||c.name,message:c.message,constraint:c.constraint||c.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},D=function(c,l,o){E(c,function(e){T.webkitGetUserMedia(e,l,function(s){o&&o(v(s))})})};if(T.getUserMedia=D.bind(T),T.mediaDevices.getUserMedia){var p=T.mediaDevices.getUserMedia.bind(T.mediaDevices);T.mediaDevices.getUserMedia=function(i){return E(i,function(c){return p(c).then(function(l){if(c.audio&&!l.getAudioTracks().length||c.video&&!l.getVideoTracks().length)throw l.getTracks().forEach(function(o){o.stop()}),new DOMException("","NotFoundError");return l},function(l){return Promise.reject(v(l))})})}}}}},{"../utils.js":11}],6:[function(L,U,P){Object.defineProperty(P,"__esModule",{value:!0}),P.removeExtmapAllowMixed=v,P.shimAddIceCandidateNullOrEmpty=D,P.shimConnectionState=E,P.shimMaxMessageSize=T,P.shimParameterlessSetLocalDescription=p,P.shimRTCIceCandidate=S,P.shimRTCIceCandidateRelayProtocol=b,P.shimSendThrowTypeError=k;var x=a(L("sdp")),f=t(L("./utils"));function r(i){if(typeof WeakMap!="function")return null;var c=new WeakMap,l=new WeakMap;return(r=function(e){return e?l:c})(i)}function t(i,c){if(!c&&i&&i.__esModule)return i;if(i===null||u(i)!=="object"&&typeof i!="function")return{default:i};var l=r(c);if(l&&l.has(i))return l.get(i);var o={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in i)if(s!=="default"&&Object.prototype.hasOwnProperty.call(i,s)){var d=e?Object.getOwnPropertyDescriptor(i,s):null;d&&(d.get||d.set)?Object.defineProperty(o,s,d):o[s]=i[s]}return o.default=i,l&&l.set(i,o),o}function a(i){return i&&i.__esModule?i:{default:i}}function u(i){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},u(i)}function S(i){if(!(!i.RTCIceCandidate||i.RTCIceCandidate&&"foundation"in i.RTCIceCandidate.prototype)){var c=i.RTCIceCandidate;i.RTCIceCandidate=function(o){if(u(o)==="object"&&o.candidate&&o.candidate.indexOf("a=")===0&&(o=JSON.parse(JSON.stringify(o)),o.candidate=o.candidate.substring(2)),o.candidate&&o.candidate.length){var e=new c(o),s=x.default.parseCandidate(o.candidate);for(var d in s)d in e||Object.defineProperty(e,d,{value:s[d]});return e.toJSON=function(){return{candidate:e.candidate,sdpMid:e.sdpMid,sdpMLineIndex:e.sdpMLineIndex,usernameFragment:e.usernameFragment}},e}return new c(o)},i.RTCIceCandidate.prototype=c.prototype,f.wrapPeerConnectionEvent(i,"icecandidate",function(l){return l.candidate&&Object.defineProperty(l,"candidate",{value:new i.RTCIceCandidate(l.candidate),writable:"false"}),l})}}function b(i){!i.RTCIceCandidate||i.RTCIceCandidate&&"relayProtocol"in i.RTCIceCandidate.prototype||f.wrapPeerConnectionEvent(i,"icecandidate",function(c){if(c.candidate){var l=x.default.parseCandidate(c.candidate.candidate);l.type==="relay"&&(c.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[l.priority>>24])}return c})}function T(i,c){if(!!i.RTCPeerConnection){"sctp"in i.RTCPeerConnection.prototype||Object.defineProperty(i.RTCPeerConnection.prototype,"sctp",{get:function(){return typeof this._sctp>"u"?null:this._sctp}});var l=function(_){if(!_||!_.sdp)return!1;var C=x.default.splitSections(_.sdp);return C.shift(),C.some(function(y){var n=x.default.parseMLine(y);return n&&n.kind==="application"&&n.protocol.indexOf("SCTP")!==-1})},o=function(_){var C=_.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(C===null||C.length<2)return-1;var y=parseInt(C[1],10);return y!==y?-1:y},e=function(_){var C=65536;return c.browser==="firefox"&&(c.version<57?_===-1?C=16384:C=2147483637:c.version<60?C=c.version===57?65535:65536:C=2147483637),C},s=function(_,C){var y=65536;c.browser==="firefox"&&c.version===57&&(y=65535);var n=x.default.matchPrefix(_.sdp,"a=max-message-size:");return n.length>0?y=parseInt(n[0].substring(19),10):c.browser==="firefox"&&C!==-1&&(y=2147483637),y},d=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,c.browser==="chrome"&&c.version>=76){var _=this.getConfiguration(),C=_.sdpSemantics;C==="plan-b"&&Object.defineProperty(this,"sctp",{get:function(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(l(arguments[0])){var y=o(arguments[0]),n=e(y),m=s(arguments[0],y),g;n===0&&m===0?g=Number.POSITIVE_INFINITY:n===0||m===0?g=Math.max(n,m):g=Math.min(n,m);var h={};Object.defineProperty(h,"maxMessageSize",{get:function(){return g}}),this._sctp=h}return d.apply(this,arguments)}}}function k(i){if(!(i.RTCPeerConnection&&"createDataChannel"in i.RTCPeerConnection.prototype))return;function c(o,e){var s=o.send;o.send=function(){var R=arguments[0],_=R.length||R.size||R.byteLength;if(o.readyState==="open"&&e.sctp&&_>e.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+e.sctp.maxMessageSize+" bytes)");return s.apply(o,arguments)}}var l=i.RTCPeerConnection.prototype.createDataChannel;i.RTCPeerConnection.prototype.createDataChannel=function(){var e=l.apply(this,arguments);return c(e,this),e},f.wrapPeerConnectionEvent(i,"datachannel",function(o){return c(o.channel,o.target),o})}function E(i){if(!(!i.RTCPeerConnection||"connectionState"in i.RTCPeerConnection.prototype)){var c=i.RTCPeerConnection.prototype;Object.defineProperty(c,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(c,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(o){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),o&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=o)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(l){var o=c[l];c[l]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var s=e.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;var d=new Event("connectionstatechange",e);s.dispatchEvent(d)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),o.apply(this,arguments)}})}}function v(i,c){if(!!i.RTCPeerConnection&&!(c.browser==="chrome"&&c.version>=71)&&!(c.browser==="safari"&&c.version>=605)){var l=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(e){if(e&&e.sdp&&e.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){var s=e.sdp.split(`
`).filter(function(d){return d.trim()!=="a=extmap-allow-mixed"}).join(`
`);i.RTCSessionDescription&&e instanceof i.RTCSessionDescription?arguments[0]=new i.RTCSessionDescription({type:e.type,sdp:s}):e.sdp=s}return l.apply(this,arguments)}}}function D(i,c){if(!!(i.RTCPeerConnection&&i.RTCPeerConnection.prototype)){var l=i.RTCPeerConnection.prototype.addIceCandidate;!l||l.length===0||(i.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(c.browser==="chrome"&&c.version<78||c.browser==="firefox"&&c.version<68||c.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():l.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}function p(i,c){if(!!(i.RTCPeerConnection&&i.RTCPeerConnection.prototype)){var l=i.RTCPeerConnection.prototype.setLocalDescription;!l||l.length===0||(i.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this,s=arguments[0]||{};if(u(s)!=="object"||s.type&&s.sdp)return l.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer";break}if(s.sdp||s.type!=="offer"&&s.type!=="answer")return l.apply(this,[s]);var d=s.type==="offer"?this.createOffer:this.createAnswer;return d.apply(this).then(function(R){return l.apply(e,[R])})})}}},{"./utils":11,sdp:12}],7:[function(L,U,P){Object.defineProperty(P,"__esModule",{value:!0}),P.shimAddTransceiver=R,P.shimCreateAnswer=y,P.shimCreateOffer=C,Object.defineProperty(P,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}}),P.shimGetParameters=_,Object.defineProperty(P,"shimGetUserMedia",{enumerable:!0,get:function(){return f.shimGetUserMedia}}),P.shimOnTrack=c,P.shimPeerConnection=l,P.shimRTCDataChannel=d,P.shimReceiverGetStats=e,P.shimRemoveStream=s,P.shimSenderGetStats=o;var x=a(L("../utils")),f=L("./getusermedia"),r=L("./getdisplaymedia");function t(n){if(typeof WeakMap!="function")return null;var m=new WeakMap,g=new WeakMap;return(t=function(O){return O?g:m})(n)}function a(n,m){if(!m&&n&&n.__esModule)return n;if(n===null||i(n)!=="object"&&typeof n!="function")return{default:n};var g=t(m);if(g&&g.has(n))return g.get(n);var h={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in n)if(M!=="default"&&Object.prototype.hasOwnProperty.call(n,M)){var I=O?Object.getOwnPropertyDescriptor(n,M):null;I&&(I.get||I.set)?Object.defineProperty(h,M,I):h[M]=n[M]}return h.default=n,g&&g.set(n,h),h}function u(n){return k(n)||T(n)||b(n)||S()}function S(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(n,m){if(!!n){if(typeof n=="string")return E(n,m);var g=Object.prototype.toString.call(n).slice(8,-1);if(g==="Object"&&n.constructor&&(g=n.constructor.name),g==="Map"||g==="Set")return Array.from(n);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return E(n,m)}}function T(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function k(n){if(Array.isArray(n))return E(n)}function E(n,m){(m==null||m>n.length)&&(m=n.length);for(var g=0,h=new Array(m);g<m;g++)h[g]=n[g];return h}function v(n,m,g){return m=D(m),m in n?Object.defineProperty(n,m,{value:g,enumerable:!0,configurable:!0,writable:!0}):n[m]=g,n}function D(n){var m=p(n,"string");return i(m)==="symbol"?m:String(m)}function p(n,m){if(i(n)!=="object"||n===null)return n;var g=n[Symbol.toPrimitive];if(g!==void 0){var h=g.call(n,m||"default");if(i(h)!=="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(n)}function i(n){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},i(n)}function c(n){i(n)==="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function l(n,m){if(!(i(n)!=="object"||!(n.RTCPeerConnection||n.mozRTCPeerConnection))){!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),m.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(O){var M=n.RTCPeerConnection.prototype[O],I=v({},O,function(){return arguments[0]=new(O==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),M.apply(this,arguments)});n.RTCPeerConnection.prototype[O]=I[O]});var g={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},h=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){var M=Array.prototype.slice.call(arguments),I=M[0],G=M[1],A=M[2];return h.apply(this,[I||null]).then(function(N){if(m.version<53&&!G)try{N.forEach(function(F){F.type=g[F.type]||F.type})}catch(F){if(F.name!=="TypeError")throw F;N.forEach(function(j,q){N.set(q,Object.assign({},j,{type:g[j.type]||j.type}))})}return N}).then(G,A)}}}function o(n){if(!!(i(n)==="object"&&n.RTCPeerConnection&&n.RTCRtpSender)&&!(n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)){var m=n.RTCPeerConnection.prototype.getSenders;m&&(n.RTCPeerConnection.prototype.getSenders=function(){var O=this,M=m.apply(this,[]);return M.forEach(function(I){return I._pc=O}),M});var g=n.RTCPeerConnection.prototype.addTrack;g&&(n.RTCPeerConnection.prototype.addTrack=function(){var O=g.apply(this,arguments);return O._pc=this,O}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function e(n){if(!!(i(n)==="object"&&n.RTCPeerConnection&&n.RTCRtpSender)&&!(n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)){var m=n.RTCPeerConnection.prototype.getReceivers;m&&(n.RTCPeerConnection.prototype.getReceivers=function(){var h=this,O=m.apply(this,[]);return O.forEach(function(M){return M._pc=h}),O}),x.wrapPeerConnectionEvent(n,"track",function(g){return g.receiver._pc=g.srcElement,g}),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function s(n){!n.RTCPeerConnection||"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(g){var h=this;x.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(O){O.track&&g.getTracks().includes(O.track)&&h.removeTrack(O)})})}function d(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function R(n){if(!!(i(n)==="object"&&n.RTCPeerConnection)){var m=n.RTCPeerConnection.prototype.addTransceiver;m&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var h=arguments[1]&&arguments[1].sendEncodings;h===void 0&&(h=[]),h=u(h);var O=h.length>0;O&&h.forEach(function(A){if("rid"in A){var N=/^[a-z0-9]{0,16}$/i;if(!N.test(A.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in A&&!(parseFloat(A.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in A&&!(parseFloat(A.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});var M=m.apply(this,arguments);if(O){var I=M.sender,G=I.getParameters();(!("encodings"in G)||G.encodings.length===1&&Object.keys(G.encodings[0]).length===0)&&(G.encodings=h,I.sendEncodings=h,this.setParametersPromises.push(I.setParameters(G).then(function(){delete I.sendEncodings}).catch(function(){delete I.sendEncodings})))}return M})}}function _(n){if(!!(i(n)==="object"&&n.RTCRtpSender)){var m=n.RTCRtpSender.prototype.getParameters;m&&(n.RTCRtpSender.prototype.getParameters=function(){var h=m.apply(this,arguments);return"encodings"in h||(h.encodings=[].concat(this.sendEncodings||[{}])),h})}}function C(n){if(!!(i(n)==="object"&&n.RTCPeerConnection)){var m=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){var h=arguments,O=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return m.apply(O,h)}).finally(function(){O.setParametersPromises=[]}):m.apply(this,arguments)}}}function y(n){if(!!(i(n)==="object"&&n.RTCPeerConnection)){var m=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){var h=arguments,O=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return m.apply(O,h)}).finally(function(){O.setParametersPromises=[]}):m.apply(this,arguments)}}}},{"../utils":11,"./getdisplaymedia":8,"./getusermedia":9}],8:[function(L,U,P){Object.defineProperty(P,"__esModule",{value:!0}),P.shimGetDisplayMedia=x;function x(f,r){f.navigator.mediaDevices&&"getDisplayMedia"in f.navigator.mediaDevices||!f.navigator.mediaDevices||(f.navigator.mediaDevices.getDisplayMedia=function(a){if(!(a&&a.video)){var u=new DOMException("getDisplayMedia without video constraints is undefined");return u.name="NotFoundError",u.code=8,Promise.reject(u)}return a.video===!0?a.video={mediaSource:r}:a.video.mediaSource=r,f.navigator.mediaDevices.getUserMedia(a)})}},{}],9:[function(L,U,P){Object.defineProperty(P,"__esModule",{value:!0}),P.shimGetUserMedia=a;var x=r(L("../utils"));function f(u){if(typeof WeakMap!="function")return null;var S=new WeakMap,b=new WeakMap;return(f=function(k){return k?b:S})(u)}function r(u,S){if(!S&&u&&u.__esModule)return u;if(u===null||t(u)!=="object"&&typeof u!="function")return{default:u};var b=f(S);if(b&&b.has(u))return b.get(u);var T={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in u)if(E!=="default"&&Object.prototype.hasOwnProperty.call(u,E)){var v=k?Object.getOwnPropertyDescriptor(u,E):null;v&&(v.get||v.set)?Object.defineProperty(T,E,v):T[E]=u[E]}return T.default=u,b&&b.set(u,T),T}function t(u){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},t(u)}function a(u,S){var b=u&&u.navigator,T=u&&u.MediaStreamTrack;if(b.getUserMedia=function(p,i,c){x.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),b.mediaDevices.getUserMedia(p).then(i,c)},!(S.version>55&&"autoGainControl"in b.mediaDevices.getSupportedConstraints())){var k=function(i,c,l){c in i&&!(l in i)&&(i[l]=i[c],delete i[c])},E=b.mediaDevices.getUserMedia.bind(b.mediaDevices);if(b.mediaDevices.getUserMedia=function(p){return t(p)==="object"&&t(p.audio)==="object"&&(p=JSON.parse(JSON.stringify(p)),k(p.audio,"autoGainControl","mozAutoGainControl"),k(p.audio,"noiseSuppression","mozNoiseSuppression")),E(p)},T&&T.prototype.getSettings){var v=T.prototype.getSettings;T.prototype.getSettings=function(){var p=v.apply(this,arguments);return k(p,"mozAutoGainControl","autoGainControl"),k(p,"mozNoiseSuppression","noiseSuppression"),p}}if(T&&T.prototype.applyConstraints){var D=T.prototype.applyConstraints;T.prototype.applyConstraints=function(p){return this.kind==="audio"&&t(p)==="object"&&(p=JSON.parse(JSON.stringify(p)),k(p,"autoGainControl","mozAutoGainControl"),k(p,"noiseSuppression","mozNoiseSuppression")),D.apply(this,[p])}}}}},{"../utils":11}],10:[function(L,U,P){Object.defineProperty(P,"__esModule",{value:!0}),P.shimAudioContext=D,P.shimCallbacksAPI=S,P.shimConstraints=T,P.shimCreateOfferLegacy=v,P.shimGetUserMedia=b,P.shimLocalStreamsAPI=a,P.shimRTCIceServerUrls=k,P.shimRemoteStreamsAPI=u,P.shimTrackEventTransceiver=E;var x=r(L("../utils"));function f(p){if(typeof WeakMap!="function")return null;var i=new WeakMap,c=new WeakMap;return(f=function(o){return o?c:i})(p)}function r(p,i){if(!i&&p&&p.__esModule)return p;if(p===null||t(p)!=="object"&&typeof p!="function")return{default:p};var c=f(i);if(c&&c.has(p))return c.get(p);var l={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var e in p)if(e!=="default"&&Object.prototype.hasOwnProperty.call(p,e)){var s=o?Object.getOwnPropertyDescriptor(p,e):null;s&&(s.get||s.set)?Object.defineProperty(l,e,s):l[e]=p[e]}return l.default=p,c&&c.set(p,l),l}function t(p){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},t(p)}function a(p){if(!(t(p)!=="object"||!p.RTCPeerConnection)){if("getLocalStreams"in p.RTCPeerConnection.prototype||(p.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in p.RTCPeerConnection.prototype)){var i=p.RTCPeerConnection.prototype.addTrack;p.RTCPeerConnection.prototype.addStream=function(l){var o=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(l)||this._localStreams.push(l),l.getAudioTracks().forEach(function(e){return i.call(o,e,l)}),l.getVideoTracks().forEach(function(e){return i.call(o,e,l)})},p.RTCPeerConnection.prototype.addTrack=function(l){for(var o=this,e=arguments.length,s=new Array(e>1?e-1:0),d=1;d<e;d++)s[d-1]=arguments[d];return s&&s.forEach(function(R){o._localStreams?o._localStreams.includes(R)||o._localStreams.push(R):o._localStreams=[R]}),i.apply(this,arguments)}}"removeStream"in p.RTCPeerConnection.prototype||(p.RTCPeerConnection.prototype.removeStream=function(l){var o=this;this._localStreams||(this._localStreams=[]);var e=this._localStreams.indexOf(l);if(e!==-1){this._localStreams.splice(e,1);var s=l.getTracks();this.getSenders().forEach(function(d){s.includes(d.track)&&o.removeTrack(d)})}})}}function u(p){if(!(t(p)!=="object"||!p.RTCPeerConnection)&&("getRemoteStreams"in p.RTCPeerConnection.prototype||(p.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in p.RTCPeerConnection.prototype))){Object.defineProperty(p.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(l){var o=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=l),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(s){if(o._remoteStreams||(o._remoteStreams=[]),!o._remoteStreams.includes(s)){o._remoteStreams.push(s);var d=new Event("addstream");d.stream=s,o.dispatchEvent(d)}})})}});var i=p.RTCPeerConnection.prototype.setRemoteDescription;p.RTCPeerConnection.prototype.setRemoteDescription=function(){var l=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(o){o.streams.forEach(function(e){if(l._remoteStreams||(l._remoteStreams=[]),!(l._remoteStreams.indexOf(e)>=0)){l._remoteStreams.push(e);var s=new Event("addstream");s.stream=e,l.dispatchEvent(s)}})}),i.apply(l,arguments)}}}function S(p){if(!(t(p)!=="object"||!p.RTCPeerConnection)){var i=p.RTCPeerConnection.prototype,c=i.createOffer,l=i.createAnswer,o=i.setLocalDescription,e=i.setRemoteDescription,s=i.addIceCandidate;i.createOffer=function(_,C){var y=arguments.length>=2?arguments[2]:arguments[0],n=c.apply(this,[y]);return C?(n.then(_,C),Promise.resolve()):n},i.createAnswer=function(_,C){var y=arguments.length>=2?arguments[2]:arguments[0],n=l.apply(this,[y]);return C?(n.then(_,C),Promise.resolve()):n};var d=function(_,C,y){var n=o.apply(this,[_]);return y?(n.then(C,y),Promise.resolve()):n};i.setLocalDescription=d,d=function(_,C,y){var n=e.apply(this,[_]);return y?(n.then(C,y),Promise.resolve()):n},i.setRemoteDescription=d,d=function(_,C,y){var n=s.apply(this,[_]);return y?(n.then(C,y),Promise.resolve()):n},i.addIceCandidate=d}}function b(p){var i=p&&p.navigator;if(i.mediaDevices&&i.mediaDevices.getUserMedia){var c=i.mediaDevices,l=c.getUserMedia.bind(c);i.mediaDevices.getUserMedia=function(o){return l(T(o))}}!i.getUserMedia&&i.mediaDevices&&i.mediaDevices.getUserMedia&&(i.getUserMedia=function(e,s,d){i.mediaDevices.getUserMedia(e).then(s,d)}.bind(i))}function T(p){return p&&p.video!==void 0?Object.assign({},p,{video:x.compactObject(p.video)}):p}function k(p){if(!!p.RTCPeerConnection){var i=p.RTCPeerConnection;p.RTCPeerConnection=function(l,o){if(l&&l.iceServers){for(var e=[],s=0;s<l.iceServers.length;s++){var d=l.iceServers[s];d.urls===void 0&&d.url?(x.deprecated("RTCIceServer.url","RTCIceServer.urls"),d=JSON.parse(JSON.stringify(d)),d.urls=d.url,delete d.url,e.push(d)):e.push(l.iceServers[s])}l.iceServers=e}return new i(l,o)},p.RTCPeerConnection.prototype=i.prototype,"generateCertificate"in i&&Object.defineProperty(p.RTCPeerConnection,"generateCertificate",{get:function(){return i.generateCertificate}})}}function E(p){t(p)==="object"&&p.RTCTrackEvent&&"receiver"in p.RTCTrackEvent.prototype&&!("transceiver"in p.RTCTrackEvent.prototype)&&Object.defineProperty(p.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function v(p){var i=p.RTCPeerConnection.prototype.createOffer;p.RTCPeerConnection.prototype.createOffer=function(l){if(l){typeof l.offerToReceiveAudio<"u"&&(l.offerToReceiveAudio=!!l.offerToReceiveAudio);var o=this.getTransceivers().find(function(s){return s.receiver.track.kind==="audio"});l.offerToReceiveAudio===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):l.offerToReceiveAudio===!0&&!o&&this.addTransceiver("audio",{direction:"recvonly"}),typeof l.offerToReceiveVideo<"u"&&(l.offerToReceiveVideo=!!l.offerToReceiveVideo);var e=this.getTransceivers().find(function(s){return s.receiver.track.kind==="video"});l.offerToReceiveVideo===!1&&e?e.direction==="sendrecv"?e.setDirection?e.setDirection("sendonly"):e.direction="sendonly":e.direction==="recvonly"&&(e.setDirection?e.setDirection("inactive"):e.direction="inactive"):l.offerToReceiveVideo===!0&&!e&&this.addTransceiver("video",{direction:"recvonly"})}return i.apply(this,arguments)}}function D(p){t(p)!=="object"||p.AudioContext||(p.AudioContext=p.webkitAudioContext)}},{"../utils":11}],11:[function(L,U,P){Object.defineProperty(P,"__esModule",{value:!0}),P.compactObject=i,P.deprecated=v,P.detectBrowser=D,P.disableLog=T,P.disableWarnings=k,P.extractVersion=S,P.filterStats=l,P.log=E,P.walkStats=c,P.wrapPeerConnectionEvent=b;function x(o,e,s){return e=f(e),e in o?Object.defineProperty(o,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[e]=s,o}function f(o){var e=r(o,"string");return t(e)==="symbol"?e:String(e)}function r(o,e){if(t(o)!=="object"||o===null)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var d=s.call(o,e||"default");if(t(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(o)}function t(o){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(o)}var a=!0,u=!0;function S(o,e,s){var d=o.match(e);return d&&d.length>=s&&parseInt(d[s],10)}function b(o,e,s){if(!!o.RTCPeerConnection){var d=o.RTCPeerConnection.prototype,R=d.addEventListener;d.addEventListener=function(C,y){if(C!==e)return R.apply(this,arguments);var n=function(g){var h=s(g);h&&(y.handleEvent?y.handleEvent(h):y(h))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(y,n),R.apply(this,[C,n])};var _=d.removeEventListener;d.removeEventListener=function(C,y){if(C!==e||!this._eventMap||!this._eventMap[e])return _.apply(this,arguments);if(!this._eventMap[e].has(y))return _.apply(this,arguments);var n=this._eventMap[e].get(y);return this._eventMap[e].delete(y),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,_.apply(this,[C,n])},Object.defineProperty(d,"on"+e,{get:function(){return this["_on"+e]},set:function(y){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),y&&this.addEventListener(e,this["_on"+e]=y)},enumerable:!0,configurable:!0})}}function T(o){return typeof o!="boolean"?new Error("Argument type: "+t(o)+". Please use a boolean."):(a=o,o?"adapter.js logging disabled":"adapter.js logging enabled")}function k(o){return typeof o!="boolean"?new Error("Argument type: "+t(o)+". Please use a boolean."):(u=!o,"adapter.js deprecation warnings "+(o?"disabled":"enabled"))}function E(){if((typeof window>"u"?"undefined":t(window))==="object"){if(a)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function v(o,e){!u||console.warn(o+" is deprecated, please use "+e+" instead.")}function D(o){var e={browser:null,version:null};if(typeof o>"u"||!o.navigator||!o.navigator.userAgent)return e.browser="Not a browser.",e;var s=o.navigator;if(s.mozGetUserMedia)e.browser="firefox",e.version=S(s.userAgent,/Firefox\/(\d+)\./,1);else if(s.webkitGetUserMedia||o.isSecureContext===!1&&o.webkitRTCPeerConnection)e.browser="chrome",e.version=S(s.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(o.RTCPeerConnection&&s.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=S(s.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=o.RTCRtpTransceiver&&"currentDirection"in o.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function p(o){return Object.prototype.toString.call(o)==="[object Object]"}function i(o){return p(o)?Object.keys(o).reduce(function(e,s){var d=p(o[s]),R=d?i(o[s]):o[s],_=d&&!Object.keys(R).length;return R===void 0||_?e:Object.assign(e,x({},s,R))},{}):o}function c(o,e,s){!e||s.has(e.id)||(s.set(e.id,e),Object.keys(e).forEach(function(d){d.endsWith("Id")?c(o,o.get(e[d]),s):d.endsWith("Ids")&&e[d].forEach(function(R){c(o,o.get(R),s)})}))}function l(o,e,s){var d=s?"outbound-rtp":"inbound-rtp",R=new Map;if(e===null)return R;var _=[];return o.forEach(function(C){C.type==="track"&&C.trackIdentifier===e.id&&_.push(C)}),_.forEach(function(C){o.forEach(function(y){y.type===d&&y.trackId===C.id&&c(o,y,R)})}),R}},{}],12:[function(L,U,P){var x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},f={};f.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},f.localCName=f.generateIdentifier(),f.splitLines=function(r){return r.trim().split(`
`).map(function(t){return t.trim()})},f.splitSections=function(r){var t=r.split(`
m=`);return t.map(function(a,u){return(u>0?"m="+a:a).trim()+`\r
`})},f.getDescription=function(r){var t=f.splitSections(r);return t&&t[0]},f.getMediaSections=function(r){var t=f.splitSections(r);return t.shift(),t},f.matchPrefix=function(r,t){return f.splitLines(r).filter(function(a){return a.indexOf(t)===0})},f.parseCandidate=function(r){var t=void 0;r.indexOf("a=candidate:")===0?t=r.substring(12).split(" "):t=r.substring(10).split(" ");for(var a={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},u=8;u<t.length;u+=2)switch(t[u]){case"raddr":a.relatedAddress=t[u+1];break;case"rport":a.relatedPort=parseInt(t[u+1],10);break;case"tcptype":a.tcpType=t[u+1];break;case"ufrag":a.ufrag=t[u+1],a.usernameFragment=t[u+1];break;default:a[t[u]]===void 0&&(a[t[u]]=t[u+1]);break}return a},f.writeCandidate=function(r){var t=[];t.push(r.foundation);var a=r.component;a==="rtp"?t.push(1):a==="rtcp"?t.push(2):t.push(a),t.push(r.protocol.toUpperCase()),t.push(r.priority),t.push(r.address||r.ip),t.push(r.port);var u=r.type;return t.push("typ"),t.push(u),u!=="host"&&r.relatedAddress&&r.relatedPort&&(t.push("raddr"),t.push(r.relatedAddress),t.push("rport"),t.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(t.push("tcptype"),t.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(t.push("ufrag"),t.push(r.usernameFragment||r.ufrag)),"candidate:"+t.join(" ")},f.parseIceOptions=function(r){return r.substring(14).split(" ")},f.parseRtpMap=function(r){var t=r.substring(9).split(" "),a={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),a.name=t[0],a.clockRate=parseInt(t[1],10),a.channels=t.length===3?parseInt(t[2],10):1,a.numChannels=a.channels,a},f.writeRtpMap=function(r){var t=r.payloadType;r.preferredPayloadType!==void 0&&(t=r.preferredPayloadType);var a=r.channels||r.numChannels||1;return"a=rtpmap:"+t+" "+r.name+"/"+r.clockRate+(a!==1?"/"+a:"")+`\r
`},f.parseExtmap=function(r){var t=r.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},f.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},f.parseFmtp=function(r){for(var t={},a=void 0,u=r.substring(r.indexOf(" ")+1).split(";"),S=0;S<u.length;S++)a=u[S].trim().split("="),t[a[0].trim()]=a[1];return t},f.writeFmtp=function(r){var t="",a=r.payloadType;if(r.preferredPayloadType!==void 0&&(a=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){var u=[];Object.keys(r.parameters).forEach(function(S){r.parameters[S]!==void 0?u.push(S+"="+r.parameters[S]):u.push(S)}),t+="a=fmtp:"+a+" "+u.join(";")+`\r
`}return t},f.parseRtcpFb=function(r){var t=r.substring(r.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},f.writeRtcpFb=function(r){var t="",a=r.payloadType;return r.preferredPayloadType!==void 0&&(a=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(function(u){t+="a=rtcp-fb:"+a+" "+u.type+(u.parameter&&u.parameter.length?" "+u.parameter:"")+`\r
`}),t},f.parseSsrcMedia=function(r){var t=r.indexOf(" "),a={ssrc:parseInt(r.substring(7,t),10)},u=r.indexOf(":",t);return u>-1?(a.attribute=r.substring(t+1,u),a.value=r.substring(u+1)):a.attribute=r.substring(t+1),a},f.parseSsrcGroup=function(r){var t=r.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(a){return parseInt(a,10)})}},f.getMid=function(r){var t=f.matchPrefix(r,"a=mid:")[0];if(t)return t.substring(6)},f.parseFingerprint=function(r){var t=r.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},f.getDtlsParameters=function(r,t){var a=f.matchPrefix(r+t,"a=fingerprint:");return{role:"auto",fingerprints:a.map(f.parseFingerprint)}},f.writeDtlsParameters=function(r,t){var a="a=setup:"+t+`\r
`;return r.fingerprints.forEach(function(u){a+="a=fingerprint:"+u.algorithm+" "+u.value+`\r
`}),a},f.parseCryptoLine=function(r){var t=r.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},f.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(x(r.keyParams)==="object"?f.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},f.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;var t=r.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},f.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},f.getCryptoParameters=function(r,t){var a=f.matchPrefix(r+t,"a=crypto:");return a.map(f.parseCryptoLine)},f.getIceParameters=function(r,t){var a=f.matchPrefix(r+t,"a=ice-ufrag:")[0],u=f.matchPrefix(r+t,"a=ice-pwd:")[0];return a&&u?{usernameFragment:a.substring(12),password:u.substring(10)}:null},f.writeIceParameters=function(r){var t="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(t+=`a=ice-lite\r
`),t},f.parseRtpParameters=function(r){var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=f.splitLines(r),u=a[0].split(" ");t.profile=u[2];for(var S=3;S<u.length;S++){var b=u[S],T=f.matchPrefix(r,"a=rtpmap:"+b+" ")[0];if(T){var k=f.parseRtpMap(T),E=f.matchPrefix(r,"a=fmtp:"+b+" ");switch(k.parameters=E.length?f.parseFmtp(E[0]):{},k.rtcpFeedback=f.matchPrefix(r,"a=rtcp-fb:"+b+" ").map(f.parseRtcpFb),t.codecs.push(k),k.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(k.name.toUpperCase());break}}}f.matchPrefix(r,"a=extmap:").forEach(function(D){t.headerExtensions.push(f.parseExtmap(D))});var v=f.matchPrefix(r,"a=rtcp-fb:* ").map(f.parseRtcpFb);return t.codecs.forEach(function(D){v.forEach(function(p){var i=D.rtcpFeedback.find(function(c){return c.type===p.type&&c.parameter===p.parameter});i||D.rtcpFeedback.push(p)})}),t},f.writeRtpDescription=function(r,t){var a="";a+="m="+r+" ",a+=t.codecs.length>0?"9":"0",a+=" "+(t.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=t.codecs.map(function(S){return S.preferredPayloadType!==void 0?S.preferredPayloadType:S.payloadType}).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,t.codecs.forEach(function(S){a+=f.writeRtpMap(S),a+=f.writeFmtp(S),a+=f.writeRtcpFb(S)});var u=0;return t.codecs.forEach(function(S){S.maxptime>u&&(u=S.maxptime)}),u>0&&(a+="a=maxptime:"+u+`\r
`),t.headerExtensions&&t.headerExtensions.forEach(function(S){a+=f.writeExtmap(S)}),a},f.parseRtpEncodingParameters=function(r){var t=[],a=f.parseRtpParameters(r),u=a.fecMechanisms.indexOf("RED")!==-1,S=a.fecMechanisms.indexOf("ULPFEC")!==-1,b=f.matchPrefix(r,"a=ssrc:").map(function(D){return f.parseSsrcMedia(D)}).filter(function(D){return D.attribute==="cname"}),T=b.length>0&&b[0].ssrc,k=void 0,E=f.matchPrefix(r,"a=ssrc-group:FID").map(function(D){var p=D.substring(17).split(" ");return p.map(function(i){return parseInt(i,10)})});E.length>0&&E[0].length>1&&E[0][0]===T&&(k=E[0][1]),a.codecs.forEach(function(D){if(D.name.toUpperCase()==="RTX"&&D.parameters.apt){var p={ssrc:T,codecPayloadType:parseInt(D.parameters.apt,10)};T&&k&&(p.rtx={ssrc:k}),t.push(p),u&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:T,mechanism:S?"red+ulpfec":"red"},t.push(p))}}),t.length===0&&T&&t.push({ssrc:T});var v=f.matchPrefix(r,"b=");return v.length&&(v[0].indexOf("b=TIAS:")===0?v=parseInt(v[0].substring(7),10):v[0].indexOf("b=AS:")===0?v=parseInt(v[0].substring(5),10)*1e3*.95-50*40*8:v=void 0,t.forEach(function(D){D.maxBitrate=v})),t},f.parseRtcpParameters=function(r){var t={},a=f.matchPrefix(r,"a=ssrc:").map(function(b){return f.parseSsrcMedia(b)}).filter(function(b){return b.attribute==="cname"})[0];a&&(t.cname=a.value,t.ssrc=a.ssrc);var u=f.matchPrefix(r,"a=rtcp-rsize");t.reducedSize=u.length>0,t.compound=u.length===0;var S=f.matchPrefix(r,"a=rtcp-mux");return t.mux=S.length>0,t},f.writeRtcpParameters=function(r){var t="";return r.reducedSize&&(t+=`a=rtcp-rsize\r
`),r.mux&&(t+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(t+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),t},f.parseMsid=function(r){var t=void 0,a=f.matchPrefix(r,"a=msid:");if(a.length===1)return t=a[0].substring(7).split(" "),{stream:t[0],track:t[1]};var u=f.matchPrefix(r,"a=ssrc:").map(function(S){return f.parseSsrcMedia(S)}).filter(function(S){return S.attribute==="msid"});if(u.length>0)return t=u[0].value.split(" "),{stream:t[0],track:t[1]}},f.parseSctpDescription=function(r){var t=f.parseMLine(r),a=f.matchPrefix(r,"a=max-message-size:"),u=void 0;a.length>0&&(u=parseInt(a[0].substring(19),10)),isNaN(u)&&(u=65536);var S=f.matchPrefix(r,"a=sctp-port:");if(S.length>0)return{port:parseInt(S[0].substring(12),10),protocol:t.fmt,maxMessageSize:u};var b=f.matchPrefix(r,"a=sctpmap:");if(b.length>0){var T=b[0].substring(10).split(" ");return{port:parseInt(T[0],10),protocol:T[1],maxMessageSize:u}}},f.writeSctpDescription=function(r,t){var a=[];return r.protocol!=="DTLS/SCTP"?a=["m="+r.kind+" 9 "+r.protocol+" "+t.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+t.port+`\r
`]:a=["m="+r.kind+" 9 "+r.protocol+" "+t.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+t.port+" "+t.protocol+` 65535\r
`],t.maxMessageSize!==void 0&&a.push("a=max-message-size:"+t.maxMessageSize+`\r
`),a.join("")},f.generateSessionId=function(){return Math.random().toString().substr(2,22)},f.writeSessionBoilerplate=function(r,t,a){var u=void 0,S=t!==void 0?t:2;r?u=r:u=f.generateSessionId();var b=a||"thisisadapterortc";return`v=0\r
o=`+b+" "+u+" "+S+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},f.getDirection=function(r,t){for(var a=f.splitLines(r),u=0;u<a.length;u++)switch(a[u]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[u].substring(2)}return t?f.getDirection(t):"sendrecv"},f.getKind=function(r){var t=f.splitLines(r),a=t[0].split(" ");return a[0].substring(2)},f.isRejected=function(r){return r.split(" ",2)[1]==="0"},f.parseMLine=function(r){var t=f.splitLines(r),a=t[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},f.parseOLine=function(r){var t=f.matchPrefix(r,"o=")[0],a=t.substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},f.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;for(var t=f.splitLines(r),a=0;a<t.length;a++)if(t[a].length<2||t[a].charAt(1)!=="=")return!1;return!0},(typeof U>"u"?"undefined":x(U))==="object"&&(U.exports=f)},{}]},{},[1])(1)})})(V);
