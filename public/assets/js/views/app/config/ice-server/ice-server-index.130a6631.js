import{f as a}from"../../../../config-form.362d01c5.js";import{I as n}from"../../../../item-row.0ecf3573.js";import{n as o}from"../../../../_plugin-vue2_normalizer.7b9a2fe2.js";import"../../../../vendor/vendor-core.3574f8d9.js";import"../../../../vendor/vendor-others.c8ba1624.js";import"../../../../app.a373aa59.js";import"../../../../vendor/vendor-essential.91b5cfa2.js";import"../../../../vendor/vendor-bootstrap-vue.17129278.js";import"../../../../vendor/vendor-vue-gtag.f8884558.js";const c={extends:a,components:{ItemRow:n},data(){return{formData:{servers:[],type:"ice"},newRowObj:{urls:"",requiresCredential:!1,expirableCredentials:!1,username:"",credential:"",secret:"",expiresIn:43200,timeDifference:0},service:{checking:!0,status:!1,showStatus:!1}}},methods:{addNewRow(){const s=_.cloneDeep(this.newRowObj);this.formData.servers.push(s)},removeRow(s){formUtil.confirmAction().then(e=>{e.value&&(this.formData.servers.splice(s,1),this.addNewRowIfNone())})},addNewRowIfNone(){this.initianLength=this.formData.servers.length,this.formData.servers.length<1&&this.addNewRow()},beforeSubmit(){this.formData.servers=this.formData.servers.filter(s=>s.urls!=="")},afterSubmit(){this.addNewRowIfNone()},checkServerStatus(){if(!(this.formData.servers&&this.formData.servers.length&&this.formData.servers[0].urls)){this.service.showStatus=!1;return}this.service.showStatus=!0,this.service.checking=!0,this.Custom({url:"services/ice/status"}).then(s=>{this.service.checking=!1,s.status&&(this.service.status=s.status)}).catch(s=>{this.service.checking=!1,this.service.status=!1,formUtil.handleErrors(s)})},afterSubmitSuccess(){this.checkServerStatus()}},mounted(){this.addNewRowIfNone(),this.checkServerStatus()}};var l=function(){var e=this,t=e._self._c;return t("base-container",{attrs:{boxed:"","with-loader":"","is-loading":e.isLoading,"loader-color":e.vars.loaderColor}},[t("form",{on:{submit:function(i){return i.preventDefault(),e.submit.apply(null,arguments)}}},[t("collapse-transition",{attrs:{tag:"div",group:!0,duration:300}},e._l(e.formData.servers,function(i,r){return t("item-row",{key:r,attrs:{"form-data":i,"form-errors":e.formErrors[`servers${r}`],index:r},on:{remove:function(v){return e.removeRow(r)}}})}),1),e.service.showStatus?[t("div",{staticClass:"status my-4"},[e.service.checking?t("view-single",{staticClass:"view-badge badge-inline text-lg",scopedSlots:e._u([{key:"main",fn:function(){return[t("badge",{staticClass:"mb-0",attrs:{rounded:"",type:"info"}},[t("i",{staticClass:"fas fa-spinner fa-lg fa-spin mr-1"}),e._v(" "+e._s(e.$t("config.ice_server.status_checking"))+" ")])]},proxy:!0}],null,!1,1572351590)}):e.service.status?t("view-badge",{staticClass:"badge-inline text-lg",attrs:{value:e.service.status,"true-content":e.$t("config.ice_server.status_true"),"false-content":e.$t("config.ice_server.status_false"),type:"switch","true-design":"success","false-design":"danger","true-icon":"far fa-circle-check fa-lg","false-icon":"far fa-circle-times fa-lg"}}):t("view-badge",{staticClass:"badge-inline text-lg",attrs:{value:e.service.status,"true-content":e.$t("config.ice_server.status_true"),"false-content":e.$t("config.ice_server.status_false"),type:"switch","true-design":"success","false-design":"light","true-icon":"far fa-circle-check fa-lg","false-icon":"far fa-circle-times fa-lg"}}),t("div",{staticClass:"text-muted text-right text-sm mt-3 mx-2 px-1 opacity-7"},[e._v(e._s(e.$t("config.ice_server.status_info")))])],1)]:e.configs.links.iceHelper?t("a",{staticClass:"d-block my-4",attrs:{href:e.configs.links.iceHelper,target:"_blank"}},[e._v(e._s(e.$t("config.ice_server.why_needed")))]):e._e(),t("div",{staticClass:"form-footer mt-5"},[t("div",{staticClass:"left-side"},[t("base-button",{attrs:{type:"button",design:"light"},on:{click:e.addNewRow}},[e._v(e._s(e.$t("general.add")))])],1),t("div",{staticClass:"right-side"},[t("base-button",{attrs:{type:"button",design:"light"},on:{click:e.reset}},[e._v(e._s(e.$t("general.reset")))]),t("base-button",{attrs:{type:"submit",design:"primary"}},[e._v(e._s(e.$t("general.save")))])],1)])],2)])},f=[],u=o(c,l,f,!1,null,"85288180",null,null);const x=u.exports;export{x as default};
