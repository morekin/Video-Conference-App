import{m as u,i as c}from"../../../../vendor/vendor-core.3574f8d9.js";import{b as D}from"../../../../header.43f859fb.js";import{n as f}from"../../../../_plugin-vue2_normalizer.7b9a2fe2.js";import{B as p}from"../../../../vendor/vendor-bootstrap-vue.17129278.js";import"../../../../vendor/vendor-others.c8ba1624.js";import"../../../../app.a373aa59.js";import"../../../../vendor/vendor-essential.91b5cfa2.js";import"../../../../vendor/vendor-vue-gtag.f8884558.js";const g={components:{BModal:p},data(){return{activeModule:"auth",formData:{words:{}},preRequisite:{locales:[],modules:[]},formErrors:{},initialFormData:null,emptyFormData:null,showLocaleEditModal:!1,isModalLoading:!0,modalData:{locale:"en",label:null,translationInEn:null,translation:null,firstKey:null,secondKey:null,thirdKey:null,fourthKey:null},initialModalData:{},isLoading:!1,showReloadBtn:!1}},computed:{...u("config",["vars"])},methods:{...c("common",["Custom","SetPageHeader"]),...c("config",["SetUiConfig"]),getInitialData(){this.isLoading=!0,this.$route.query&&this.$route.query.module&&(this.activeModule=this.$route.query.module),this.Custom({url:"config/locales/pre-requisite",params:{module:this.activeModule}}).then(o=>{this.preRequisite.locales=_.cloneDeep(o.locales),this.preRequisite.modules=_.cloneDeep(o.modules),o.words.objForEach((t,a)=>{_.isObject(t)?this.formData.words[a]=Object.assign({},t):this.formData.words[a]={}}),this.initialFormData=Object.assign({},this.formData),this.initialModalData=Object.assign({},this.modalData),this.isLoading=!1}).catch(o=>{this.isLoading=!1,this.formErrors=formUtil.handleErrors(o)})},humanize(o){return _.startCase(o)},getLocaleByCode(o){let t=this.preRequisite.locales.find(a=>a.locale===o);return t?`${t.name} (${o})`:o},updateRouteQuery(o){const t=Object.assign({},this.$route.query,o);this.$router.push({path:this.$route.path,query:t})},isString(o){return _.isString(o)},isObject(o){return _.isObject(o)},toggleLocaleEditModal(o,t,a,s,i){this.modalData=_.cloneDeep(this.initialModalData),this.modalData.locale=o,this.modalData.firstKey=t,this.modalData.secondKey=a,this.modalData.thirdKey=s,this.modalData.fourthKey=i,this.modalData.label=this.getLabel(t,a,s,i),this.modalData.translationInEn=this.getTranslation("en",t,a,s,i),this.modalData.translation=this.getTranslation(o,t,a,s,i),this.showLocaleEditModal=!0,this.isModalLoading=!1},onLocaleEditModalShown(){this.$nextTick(()=>{this.$refs.newTranslation.$refs["base-input-newTranslation"].focus()})},getTranslation(o,t,a,s,i){return this.formData.words[o]?this.formData.words[o][t]?a&&this.formData.words[o][t][a]?s&&this.formData.words[o][t][a][s]?i&&this.formData.words[o][t][a][s][i]?this.formData.words[o][t][a][s][i]:i?"":this.formData.words[o][t][a][s]:s?"":this.formData.words[o][t][a]:a?"":this.formData.words[o][t]:"":"Locale not found, contact support!"},getLabel(o,t,a,s){return o+(t?a?s?" -> "+t+" -> "+a+" -> "+s:" -> "+t+" -> "+a:" -> "+t:"")},onLocaleEditModalHidden(){this.isModalLoading=!0},onLocaleEditModalOK(o){o.preventDefault(),this.isModalLoading=!0,this.modalData.firstKey&&!this.formData.words[this.modalData.locale][this.modalData.firstKey]&&(this.formData.words[this.modalData.locale][this.modalData.firstKey]={}),this.modalData.secondKey&&!this.formData.words[this.modalData.locale][this.modalData.firstKey][this.modalData.secondKey]&&(this.formData.words[this.modalData.locale][this.modalData.firstKey][this.modalData.secondKey]={}),this.modalData.thirdKey&&!this.formData.words[this.modalData.locale][this.modalData.firstKey][this.modalData.secondKey][this.modalData.thirdKey]&&(this.formData.words[this.modalData.locale][this.modalData.firstKey][this.modalData.secondKey][this.modalData.thirdKey]={}),this.modalData.fourthKey&&!this.formData.words[this.modalData.locale][this.modalData.firstKey][this.modalData.secondKey][this.modalData.thirdKey][this.modalData.fourthKey]&&(this.formData.words[this.modalData.locale][this.modalData.firstKey][this.modalData.secondKey][this.modalData.thirdKey][this.modalData.fourthKey]={}),this.modalData.firstKey&&this.modalData.secondKey&&this.modalData.thirdKey&&this.modalData.fourthKey?this.formData.words[this.modalData.locale][this.modalData.firstKey][this.modalData.secondKey][this.modalData.thirdKey][this.modalData.fourthKey]=this.modalData.translation:this.modalData.firstKey&&this.modalData.secondKey&&this.modalData.thirdKey?this.formData.words[this.modalData.locale][this.modalData.firstKey][this.modalData.secondKey][this.modalData.thirdKey]=this.modalData.translation:this.modalData.firstKey&&this.modalData.secondKey?this.formData.words[this.modalData.locale][this.modalData.firstKey][this.modalData.secondKey]=this.modalData.translation:this.modalData.firstKey&&(this.formData.words[this.modalData.locale][this.modalData.firstKey]=this.modalData.translation),this.Custom({url:`config/locales/${this.modalData.locale}/translate`,method:"post",data:{module:this.activeModule,words:this.formData.words[this.modalData.locale]}}).then(t=>{this.initialFormData=_.cloneDeep(this.formData),this.modalData=_.cloneDeep(this.initialModalData),this.$refs.localeEditModal.hide(),this.showReloadBtn=!0}).catch(t=>{this.formData=_.cloneDeep(this.initialFormData),this.isModalLoading=!1,this.formErrors=formUtil.handleErrors(t)})},applyPageHeader(){let o={buttons:[D("appConfigLocaleAdd","access-config")]};this.SetPageHeader(o)},reloadPage(){location.reload(!0)}},mounted(){this.emptyFormData=Object.assign({},this.formData),this.getInitialData(),this.applyPageHeader()},watch:{$route(){this.getInitialData()}}};var b=function(){var t=this,a=t._self._c;return a("base-container",{staticClass:"p-0 flex-grow",attrs:{boxed:"","with-loader":"","is-loading":t.isLoading,"loader-color":t.vars.loaderColor}},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"text-left p-4"},[t.showReloadBtn?a("base-button",{attrs:{type:"button",design:"light",size:"md"},on:{click:t.reloadPage}},[a("i",{staticClass:"fas fa-sync-alt"}),t._v(" "+t._s(t.$t("general.reload_page")))]):t._e()],1),t.activeModule?a("div",{staticClass:"text-right p-4"},[a("base-dropdown",{attrs:{tag:"div",direction:"down","menu-classes":"show-dropdown-up",position:"right"}},[a("base-button",{attrs:{slot:"title",type:"button","data-toggle":"dropdown",role:"button",design:"info",size:"md"},slot:"title"},[a("i",{staticClass:"fas fa-boxes"}),t._v(" "+t._s(t.$t(t.activeModule+"."+t.activeModule))+" "),a("i",{staticClass:"fas fa-chevron-down"})]),t._l(t.preRequisite.modules,function(s){return a("a",{key:s,staticClass:"dropdown-item",on:{click:function(i){return t.updateRouteQuery({module:s})}}},[t._v(" "+t._s(t.$t(s+"."+s))+" "),s==t.activeModule?a("i",{staticClass:"fas fa-check pull-right"}):t._e()])})],2)],1):t._e()]),a("div",{staticClass:"table-responsive table-wrapper"},[a("form",{on:{submit:function(s){return s.preventDefault(),t.submit.apply(null,arguments)}}},[a("table",{staticClass:"table b-table table-striped table-hover b-table-stacked-sm"},[a("thead",[a("tr",[a("th",[t._v(t._s(t.$t("config.locale.key")))]),t._l(t.preRequisite.locales,function(s){return a("th",{key:s.locale},[t._v(t._s(`${s.name} (${s.locale})`))])})],2)]),a("tbody",[t._l(t.formData.words.en,function(s,i){return[t.isString(s)?[a("tr",{key:i},[a("td",[t._v(t._s(i))]),t._l(t.preRequisite.locales,function(r){return a("td",{key:r.locale,on:{dblclick:function(l){return t.toggleLocaleEditModal(r.locale,i)}}},[t._v(t._s(t.getTranslation(r.locale,i)))])})],2)]:t._e(),t.isObject(s)?[t._l(s,function(r,l){return[t.isString(r)?[a("tr",{key:`${i}${l}`},[a("td",[t._v(t._s(i)+" -> "+t._s(l))]),t._l(t.preRequisite.locales,function(n){return a("td",{key:n.locale,on:{dblclick:function(e){return t.toggleLocaleEditModal(n.locale,i,l)}}},[t._v(t._s(t.getTranslation(n.locale,i,l)))])})],2)]:t._e(),t.isObject(r)?[t._l(r,function(n,e){return[t.isString(n)?[a("tr",{key:`${i}${l}${e}`},[a("td",[t._v(t._s(i)+" -> "+t._s(l)+" -> "+t._s(e))]),t._l(t.preRequisite.locales,function(m){return a("td",{key:m.locale,on:{dblclick:function(d){return t.toggleLocaleEditModal(m.locale,i,l,e)}}},[t._v(t._s(t.getTranslation(m.locale,i,l,e)))])})],2)]:t._e(),t.isObject(n)?t._l(n,function(m,d){return a("tr",{key:`${i}${l}${e}${d}`},[a("td",[t._v(t._s(i)+" -> "+t._s(l)+" -> "+t._s(e)+" -> "+t._s(d))]),t._l(t.preRequisite.locales,function(h){return a("td",{key:h.locale,on:{dblclick:function($){return t.toggleLocaleEditModal(h.locale,i,l,e,d)}}},[t._v(t._s(t.getTranslation(h.locale,i,l,e,d)))])})],2)}):t._e()]})]:t._e()]})]:t._e()]})],2)])])]),a("b-modal",{ref:"localeEditModal",attrs:{size:"md",centered:"",lazy:"",busy:t.isModalLoading,"no-close-on-backdrop":"","no-close-on-esc":""},on:{ok:t.onLocaleEditModalOK,hidden:t.onLocaleEditModalHidden,shown:t.onLocaleEditModalShown},model:{value:t.showLocaleEditModal,callback:function(s){t.showLocaleEditModal=s},expression:"showLocaleEditModal"}},[a("template",{slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("config.locale.translation")))])]),a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("base-input",{ref:"newTranslation",staticClass:"mb-5",attrs:{label:`${t.modalData.label} (${t.modalData.locale})`,type:"text",error:t.formErrors.translation,name:"newTranslation"},on:{"update:error":function(s){return t.$set(t.formErrors,"translation",s)}},model:{value:t.modalData.translation,callback:function(s){t.$set(t.modalData,"translation",s)},expression:"modalData.translation"}})],1)]),a("p",{staticClass:"text-muted small m-0"},[t._v("In English - "+t._s(t.modalData.translationInEn))])])],2)],1)},w=[],v=f(g,b,w,!1,null,null,null,null);const j=v.exports;export{j as default};
