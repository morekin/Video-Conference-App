import{v as r}from"../../../view.a2d30644.js";import{m as n,i as o}from"../../../vendor/vendor-core.3574f8d9.js";import{n as l}from"../../../_plugin-vue2_normalizer.7b9a2fe2.js";import"../../../header.43f859fb.js";import"../../../app.a373aa59.js";import"../../../vendor/vendor-others.c8ba1624.js";import"../../../vendor/vendor-essential.91b5cfa2.js";import"../../../vendor/vendor-bootstrap-vue.17129278.js";import"../../../vendor/vendor-vue-gtag.f8884558.js";import"../../../helpers/transformers.20070e00.js";import"../../../event-bus.6a5776a8.js";const c={extends:r,data(){return{currentMedia:null,initUrl:"meetings",recordings:[],fallBackRoute:"appMeetingList"}},computed:{...n("config",["vars"])},methods:{...o("common",["Custom"]),getData(){this.isLoading=!0,this.Custom({url:`/${this.initUrl}/${this.uuid}/recordings`,method:"get"}).then(i=>{this.recordings=i,this.isLoading=!1}).catch(i=>{this.isLoading=!1,formUtil.handleErrors(i)})},deleteRecording(i){formUtil.confirmAction().then(t=>{t.value?(this.isLoading=!0,this.Custom({url:`/${this.initUrl}/${this.uuid}/recordings/${i.uuid}`,method:"delete"}).then(e=>{this.isLoading=!1,this.$toasted.success(e.message,this.$toastConfig),this.getData()}).catch(e=>{this.isLoading=!1,formUtil.handleErrors(e)})):(t.dismiss,Swal.DismissReason.cancel)})},playRecording(i){this.isLoading=!0,this.currentMedia=null,setTimeout(()=>{this.currentMedia=i,this.isLoading=!1},1e3)},closePlayer(){this.currentMedia=null}},mounted(){this.getData()}};var d=function(){var t=this,e=t._self._c;return e("div",[t.entity&&t.currentMedia?e("base-container",{staticClass:"p-0 mb-element d-flex justify-content-stretch align-items-stretch max-height-500px",attrs:{boxed:"","with-loader":"","is-loading":t.isLoading,"loader-color":t.vars.loaderColor}},[e("close-button",{staticClass:"text-white",attrs:{title:t.$t("general.close")},on:{click:t.closePlayer}}),e("video",{staticClass:"flex-grow bg-black",attrs:{autoplay:"",controls:""}},[e("source",{attrs:{src:t.currentMedia.fullUrl,type:"video/webm"}})])],1):t._e(),e("base-container",{attrs:{boxed:"","with-loader":"","has-footer":"","min-height":"full","is-loading":t.isLoading,"loader-color":t.vars.loaderColor,id:"printable"}},[t.entity?[t.recordings&&t.recordings.length?e("div",{staticClass:"row"},t._l(t.recordings,function(s){return e("div",{key:s.uuid,staticClass:"col-12 col-md-4 col-lg-3 mb-3 text-center"},[e("a",{class:["d-flex flex-column min-height-150px justify-content-center align-items-center border border-gray mb-2 pointer",{"bg-gray":t.currentMedia&&s.uuid===t.currentMedia.uuid}],on:{click:function(a){return t.playRecording(s)}}},[e("i",{staticClass:"fas fa-play fs-2 text-muted"}),e("div",{staticClass:"text-word-break-all mt-3"},[t._v(t._s(s.name))])]),e("div",{staticClass:"d-flex justify-content-stretch"},[e("a",{staticClass:"btn btn-light btn-sm flex-grow",attrs:{href:s.fullUrl,target:"_blank"}},[e("i",{staticClass:"fas fa-download"}),t._v(" "+t._s(t.$t("general.download")))]),e("base-button",{staticClass:"flex-grow",attrs:{type:"button",design:"light",size:"sm"},on:{click:function(a){return t.deleteRecording(s)}}},[e("i",{staticClass:"fas fa-trash"}),t._v(" "+t._s(t.$t("general.delete")))])],1)])}),0):e("div",{staticClass:"text-center my-5"},[e("h3",{staticClass:"text-muted mb-3"},[t._v(t._s(t.$t("global.could_not_find_any",{attribute:t.$t("meeting.recordings")})))])])]:t._e(),e("div",{staticClass:"form-footer mt-3"},[e("div",{staticClass:"left-side"},[e("base-button",{attrs:{type:"button",design:"light",tabindex:"-1"},on:{click:function(s){return t.$router.back()}}},[e("i",{staticClass:"fas fa-chevron-left"}),t._v(" "+t._s(t.$t("general.back")))]),t.entity?e("base-button",{attrs:{type:"button",design:"light",tabindex:"-1"},on:{click:function(s){return t.$router.push({name:"appMeetingView",params:{uuid:t.entity.uuid}})}}},[e("i",{staticClass:"fas fa-arrow-circle-right"}),t._v(" "+t._s(t.$t("global.view",{attribute:t.$t("meeting.meeting")})))]):t._e()],1)])],2)],1)},u=[],m=l(c,d,u,!1,null,null,null,null);const w=m.exports;export{w as default};
