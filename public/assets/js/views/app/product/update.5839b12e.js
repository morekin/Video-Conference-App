import{m as a,i as n}from"../../../vendor/vendor-core.3574f8d9.js";import{D as l,b as i}from"../../../app.a373aa59.js";import{n as r}from"../../../_plugin-vue2_normalizer.7b9a2fe2.js";import"../../../vendor/vendor-others.c8ba1624.js";import"../../../vendor/vendor-essential.91b5cfa2.js";import"../../../vendor/vendor-bootstrap-vue.17129278.js";import"../../../vendor/vendor-vue-gtag.f8884558.js";const d={data(){return{isLoading:!1,isProcessing:!1,isDownloading:!1,isUpdating:!1}},computed:{...a("config",["configs","vars"]),...a("product",["product","updateTips","isDownloaded"]),formData(){return{build:this.product.nextReleaseBuild,version:this.product.nextReleaseVersion}}},methods:{...n("product",["PostSupport","DownloadApp","UpdateApp"]),getFileSize(e){return l(e)},confirmUpdate(){i.fire({title:"Are you sure?",text:"This will update this application to the latest version.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, update!",cancelButtonText:"No, cancel!"}).then(e=>{e.value&&this.update()})},confirmDownload(e){const t=e===0?"This will download the latest version of the application.":"This will download and update the application to the latest version.";i.fire({title:"Are you sure?",text:t,icon:"warning",showCancelButton:!0,confirmButtonText:e===0?"Yes, download!":"Yes, update!",cancelButtonText:"No, cancel!"}).then(s=>{s.value&&this.download(e)})},download(e){this.isProcessing=!0,this.isDownloading=!0,this.isUpdating=!1,this.DownloadApp().then(t=>{this.isDownloading=!1,this.isUpdating=!1,this.$toasted.success(t.message,this.$toastConfig.success),e?this.update():this.isProcessing=!1}).catch(t=>{this.isLoading=!1,formUtil.handleErrors(t),this.isProcessing=!1,this.isDownloading=!1,this.isUpdating=!1})},update(){this.isProcessing=!0,this.isDownloading=!1,this.isUpdating=!0,this.UpdateApp(this.formData).then(e=>{this.$toasted.success(e.message,this.$toastConfig.success),setTimeout(()=>{location.reload()},2e3)}).catch(e=>{this.isLoading=!1,formUtil.handleErrors(e),this.isProcessing=!1,this.isDownloading=!1,this.isUpdating=!1})}}};var c=function(){var t=this,s=t._self._c;return s("base-container",{staticClass:"d-flex align-items-center",attrs:{boxed:"","with-loader":"","min-height":"full","is-loading":t.isLoading||!t.product.currentVersion,"loader-color":t.vars.loaderColor}},[t.product.currentVersion===t.product.latestVersion?s("div",{staticClass:"text-center mt-2"},[s("h3",{staticClass:"text-muted mb-3"},[t._v("No update available!")]),s("p",{staticClass:"text-muted"},[t._v("We are constantly working on new features and fixes. We release new update after completing the development and thorough testing. Kindly check later for new updates.")]),s("div",{staticClass:"mt-5 mt-2"},[s("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"appDashboard"}}},[t._v(t._s(t.$t("general.go_to_dashboard")))])],1)]):t.isProcessing?s("div",{staticClass:"w-100 text-center"},[s("h5",{staticClass:"text-warning"},[t._v(t._s(t.$t("product.dont_do_anything")))]),t.isDownloading?s("h4",{staticClass:"my-4"},[t._v(t._s(t.$t("product.update_size"))+" ("+t._s(t.getFileSize(t.product.nextReleaseSize))+") - "+t._s(t.$t("product.downloading"))+"...")]):t._e(),t.isUpdating?s("h4",{staticClass:"my-4"},[t._v(t._s(t.$t("product.applying_updates"))+"...")]):t._e(),s("div",{staticClass:"d-flex justify-content-center"},[s("animated-loader",{attrs:{"is-loading":t.isProcessing,"loader-color":t.vars.loaderColor,"overlay-color":"transparent",size:"inline"}})],1)]):s("div",{staticClass:"w-100"},[s("div",{domProps:{innerHTML:t._s(t.updateTips)}}),s("div",{staticClass:"row mt-4"},[s("div",{staticClass:"col-12 col-md-4"},[s("div",{staticClass:"label-group"},[s("label",{staticClass:"text-muted"},[t._v("Version Available")]),s("p",{staticClass:"font-weight-bold"},[t._v(t._s(t.product.nextReleaseVersion))])])]),s("div",{staticClass:"col-12 col-md-4"},[s("div",{staticClass:"label-group"},[s("label",{staticClass:"text-muted"},[t._v("Date of Release")]),s("p",{staticClass:"font-weight-bold"},[t._v(t._s(t._f("moment")(t.product.nextReleaseDate,t.vars.defaultDateFormat)))])])]),s("div",{staticClass:"col-12 col-md-4"},[s("div",{staticClass:"label-group"},[s("label",{staticClass:"text-muted"},[t._v("Update Size")]),s("p",{staticClass:"font-weight-bold"},[t._v(t._s(t.getFileSize(t.product.nextReleaseSize)))])])])]),s("hr",{staticClass:"my-4"}),s("div",{domProps:{innerHTML:t._s(t.product.nextReleaseChangeLog)}}),s("hr",{staticClass:"my-4"}),t.isDownloaded?s("p",{staticClass:"text-info my-2"},[t._v(t._s(t.$t("product.update_downloaded")))]):t._e(),s("div",{staticClass:"row"},[t.isDownloaded?s("div",{staticClass:"col-12 col-md-6"},[s("base-button",{key:"directupdate",staticClass:"my-4",attrs:{type:"button",design:"primary",block:""},on:{click:function(o){return t.confirmUpdate()}}},[t._v(t._s(t.$t("product.apply_updates")))])],1):s("div",{staticClass:"col-12 col-md-6"},[s("base-button",{key:"download",staticClass:"my-4",attrs:{type:"button",design:"success",block:""},on:{click:function(o){return t.confirmDownload(0)}}},[t._v(t._s(t.$t("product.download")))])],1)])])])},p=[],u=r(d,c,p,!1,null,null,null,null);const C=u.exports;export{C as default};
