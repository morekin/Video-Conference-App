import{P as l,a as d}from"../../../../ProfilePage.f2eb4651.js";import{b as r,p as u,g as h,a as p}from"../../../../header.43f859fb.js";import"../../../../helpers/transformers.20070e00.js";import{m as n,i as o}from"../../../../vendor/vendor-core.3574f8d9.js";import{E as a}from"../../../../event-bus.6a5776a8.js";import{n as m}from"../../../../_plugin-vue2_normalizer.7b9a2fe2.js";import"../../../../app.a373aa59.js";import"../../../../vendor/vendor-others.c8ba1624.js";import"../../../../vendor/vendor-essential.91b5cfa2.js";import"../../../../vendor/vendor-bootstrap-vue.17129278.js";import"../../../../vendor/vendor-vue-gtag.f8884558.js";const c={components:{ProfilePage:l,ProfilePageSidebox:d},data(){return{entity:null,isLoading:!1,initUrl:"users",dataTitle:$t("user.user"),fallBackRoute:"appUserList",headerButtons:null,headerLinks:null}},computed:{...n("config",["vars"]),...n("user",["uuid","hasPermission","liveUsers"]),liveUser(){return this.value&&this.liveUsers.find(i=>i.uuid===this.value.uuid)},isOnline(){return!!this.liveUser}},methods:{...o("common",["Init","Get","Custom","SetPageHeader"]),...o("config",["SetUiConfig","SetConfig"]),changeStatus(i){formUtil.confirmAction().then(t=>{if(t.value){this.isLoading=!0;let e={status:i};this.Custom({url:`/${this.initUrl}/${this.uuid}/status`,method:"post",data:e}).then(s=>{this.isLoading=!1,this.getInitialData()}).catch(s=>{this.isLoading=!1,formUtil.handleErrors(s)})}else t.dismiss,Swal.DismissReason.cancel})},setEntityData(i){this.entityKey&&i.hasOwnProperty(this.entityKey)?this.entity=i[this.entityKey]:this.entity=i},async getInitialData(){this.isLoading=!0;try{let i=await this.Get({uuid:this.uuid});return this.setEntityData(i),this.isLoading=!1,i}catch(i){this.isLoading=!1,formUtil.handleErrors(i),this.$router.push({name:this.fallBackRoute})}},getHeaderOptions(){let i=[];this.routesRequired&&this.routesRequired.add&&(typeof this.permissionsRequired=="object"&&this.permissionsRequired!==null&&this.permissionsRequired.add?i.push(r(this.routesRequired.add,this.permissionsRequired.add)):this.permissionsRequired&&i.push(r(this.routesRequired.add,this.permissionsRequired))),this.headerButtons&&(i=i.concat(this.headerButtons));let t=[];return t.push(u()),t.push(h()),this.headerLinks&&(t=t.concat(this.headerLinks)),{hideLinks:this.hideHeaderLinks||!1,buttons:i,links:t,title:this.pageTitle||"",subTitle:this.pageTitle&&this.subTitle||""}},getKeyBindingOptions(){let i={...p};return this.routesRequired&&this.routesRequired.add&&(i.key_a=this.routesRequired.add),this.routesRequired&&this.routesRequired.edit&&(i.key_e=this.routesRequired.edit),i},applyPageHeader(){let i=Object.assign({},this.getHeaderOptions(),this.header||{}),t=Object.assign({},this.getKeyBindingOptions(),this.keyBindings||{});this.SetPageHeader(i),this.SetConfig({keyBindings:t})},async export(i){this.isLoading=!0;try{let t=`Printing ${this.dataTitle||""}`;this.printTitle&&(t=this.printTitle);const e=this.configs.system.printPreview;this.$printComponent("printable",{title:t,autoPrint:!e,autoCloseAfterPrint:!e})}catch{}this.isLoading=!1},doInit(){this.Init({url:this.initUrl}),this.getInitialData(),this.applyPageHeader()}},mounted(){a.$off("EXPORT",this.export),a.$on("EXPORT",this.export),this.doInit()},destroyed(){a.$off("EXPORT",this.export)}};var f=function(){var t=this,e=t._self._c;return e("profile-page",{attrs:{"is-loading":t.isLoading,"loader-color":t.vars.loaderColor,"inner-sidebar-box-classes":"h-100"},scopedSlots:t._u([{key:"sidebarMainContent",fn:function(){return[t.entity?e("profile-card",{attrs:{name:t.entity.profile.name,"sub-heading":t.entity.username||"-",gender:t.entity.profile.gender,image:t.entity.profile.avatar,"cover-image":t.entity.profile.cover,age:t.entity.profile.age,"data-card-color":"whitish","user-status":t.isOnline,user:t.entity,horizontal:!1,"edit-image":""}}):t._e()]},proxy:!0},{key:"mainContent",fn:function(){return[e("base-container",{attrs:{boxed:"","with-loader":"","has-footer":"","min-height":"full","is-loading":t.isLoading,"loader-color":t.vars.loaderColor}},[t.entity?[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-md-6 mb-3"},[e("view-single",{attrs:{label:t.$t("user.props.name"),value:t.entity.profile.name}})],1),e("div",{staticClass:"col-12 col-md-6 mb-3"},[e("view-single",{attrs:{label:t.$t("user.props.gender"),value:t.entity.profile.gender,showIfExists:"name"}})],1),e("div",{staticClass:"col-12 col-md-6 mb-3"},[e("view-single",{attrs:{label:t.$t("user.props.email"),value:t.entity.email}})],1),e("div",{staticClass:"col-12 col-md-6 mb-3"},[e("view-single",{attrs:{label:t.$t("user.props.mobile"),value:t.entity.mobile}})],1),e("div",{staticClass:"col-12 col-md-6 mb-3"},[e("view-single",{attrs:{label:t.$t("user.props.birth_date"),value:t._f("moment")(t.entity.profile.birthDate,t.vars.defaultDateFormat)}})],1)])]:t._e(),e("div",{staticClass:"form-footer mt-5"},[e("div",{staticClass:"left-side"},[e("base-button",{attrs:{type:"button",design:"light",tabindex:"-1"},on:{click:function(s){return t.$router.back()}}},[e("i",{staticClass:"fas fa-chevron-left"}),t._v(" "+t._s(t.$t("general.back")))])],1),e("div",{staticClass:"right-side"},[e("base-button",{attrs:{type:"button",design:"dark"},on:{click:function(s){return s.stopPropagation(),t.$router.push({name:"appProfileViewImage",params:{uuid:t.entity.uuid}})}}},[e("i",{staticClass:"fas fa-image"}),t._v(" "+t._s(t.$t("global.edit",{attribute:t.$t("user.props.image")})))]),e("base-button",{attrs:{type:"button",design:"primary"},on:{click:function(s){return s.stopPropagation(),t.$router.push({name:"appProfileEdit",params:{uuid:t.entity.uuid}})}}},[e("i",{staticClass:"fas fa-edit"}),t._v(" "+t._s(t.$t("global.edit",{attribute:t.$t("user.user")})))])],1)])],2)]},proxy:!0}])})},g=[],y=m(c,f,g,!1,null,null,null,null);const O=y.exports;export{O as default};
