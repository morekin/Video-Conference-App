import{t as l}from"../../../table.beb39f38.js";import{f as o}from"../../../filter-form.45f778d7.js";import{n as r}from"../../../_plugin-vue2_normalizer.7b9a2fe2.js";import"../../../app.a373aa59.js";import"../../../vendor/vendor-core.3574f8d9.js";import"../../../vendor/vendor-others.c8ba1624.js";import"../../../vendor/vendor-essential.91b5cfa2.js";import"../../../vendor/vendor-bootstrap-vue.17129278.js";import"../../../vendor/vendor-vue-gtag.f8884558.js";import"../../../header.43f859fb.js";import"../../../event-bus.6a5776a8.js";const n={extends:o};var u=function(){var e=this,t=e._self._c;return t("filter-wrapper",{attrs:{boxed:e.boxed,"is-loading":e.isLoading},on:{close:function(s){return e.$emit("close")}}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-md-4 mb-3"},[t("base-input",{attrs:{"auto-focus":"",label:e.$t("user.props.name"),type:"text",disabled:e.isLoading},model:{value:e.filters.name,callback:function(s){e.$set(e.filters,"name",s)},expression:"filters.name"}})],1),t("div",{staticClass:"col-12 col-md-4 mb-3"},[t("base-input",{attrs:{label:e.$t("user.props.email"),type:"text",disabled:e.isLoading},model:{value:e.filters.email,callback:function(s){e.$set(e.filters,"email",s)},expression:"filters.email"}})],1),t("div",{staticClass:"col-12 col-md-4 mb-3"},[t("base-input",{attrs:{label:e.$t("user.props.username"),type:"text",disabled:e.isLoading},model:{value:e.filters.username,callback:function(s){e.$set(e.filters,"username",s)},expression:"filters.username"}})],1)])])},m=[],d=r(n,u,m,!1,null,null,null,null);const c=d.exports,p={components:{FilterForm:c},extends:l,data(){return{fields:[{key:"profile",label:$t("user.props.name"),sort:"name"},{key:"email",label:$t("user.props.email")},{key:"username",label:$t("user.props.username"),sort:"username"},{key:"role",label:$t("config.role.role")},{key:"status",label:$t("user.props.status"),sort:"status",transformer:"badgeStatusYesNo"},{key:"hasActiveMembership",label:"",headerTitle:$t("membership.membership"),tdClass:"text-center"},{key:"isPremium",label:"",headerTitle:$t("user.premium_user"),tdClass:"text-center"},{key:"createdAt",label:$t("general.created_at"),sort:"created_at",transformer:"date",thClass:"d-none",tdClass:"d-none"},{key:"updatedAt",label:$t("general.updated_at"),sort:"updated_at",transformer:"date",thClass:"d-none",tdClass:"d-none"},{key:"actions",label:"",cantHide:!0,tdClass:"actions-dropdown-wrapper"}],filtersOptions:{name:"",username:"",email:""},sortOptions:{hasScroll:!0},columnsOptions:{hasScroll:!0},permissionsRequired:"create-user",routesRequired:{add:"appUserAdd"},initUrl:"users",dataType:"user"}},methods:{getStatusText(a){return a.replace("_"," ")},togglePremiumUser(a){this.isLoading=!0,this.Custom({url:this.initUrl+"/"+a.uuid+"/premium",method:"post"}).then(e=>{this.isLoading=!1,this.$toasted.success(e.message,this.$toastConfig),this.$nextTick(()=>{this.refreshTable(),typeof this.getInitialData=="function"&&this.getInitialDataCalled&&this.getInitialDataCalledAfterDeleting&&this.getInitialData()})}).catch(e=>{this.isLoading=!1,this.isInitialized=!0,this.formErrors=formUtil.handleErrors(e)})}},mounted(){this.updatePageMeta()}};var f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"entity-list-container"},[t("collapse-transition",{attrs:{group:!0,duration:300,tag:"div"}},[e.showFilters?t("filter-form",{key:"filters",attrs:{boxed:!0,"pre-requisite":e.preRequisite,"is-loading":e.isLoading},on:{close:e.toggleFilter}}):e._e(),t("base-container",{key:"list",staticClass:"p-0",attrs:{boxed:"","with-loader":"","is-loading":e.isLoading,"loader-color":e.vars.loaderColor}},[e.isInitialized?t("table-wrapper",{attrs:{meta:e.entities.meta,filtered:e.isFiltered,"add-button-route":"appUserAdd","add-button-permissions":["create-user"],"entity-title":"user.user","entities-title":"user.users","entity-description":"user.module_description"}},[t("b-table",{directives:[{name:"show",rawName:"v-show",value:e.entities.meta.total,expression:"entities.meta.total"}],ref:"btable",attrs:{items:e.itemsProvider,fields:e.fields,busy:e.isLoading,hover:"",striped:"",stacked:"sm","per-page":e.entities.meta.perPage,"current-page":e.entities.meta.currentPage,filters:null},on:{"update:busy":function(s){e.isLoading=s},"row-dblclicked":function(s){return e.rowClickHandler({route:"appUserView"},s)}},scopedSlots:e._u([{key:"cell(createdAt)",fn:function(s){return[t("view-date",{staticClass:"mb-0",attrs:{value:s.item.createdAt,"with-tz":"",tag:"span"}})]}},{key:"cell(updatedAt)",fn:function(s){return[t("view-date",{staticClass:"mb-0",attrs:{value:s.item.updatedAt,"with-tz":"",tag:"span"}})]}},{key:"cell(profile)",fn:function(s){return[t("view-user",{staticClass:"m-0",attrs:{value:s.item,"show-sub":!1,"inline-sub":"","show-image":!1,"data-classes":"m-0"}})]}},{key:"cell(status)",fn:function(s){return[s.item.status?t("badge",{attrs:{rounded:"",type:e.vars.colorsForStatus[s.item.status]}},[e._v(e._s(e.getStatusText(s.item.status)))]):e._e()]}},{key:"cell(hasActiveMembership)",fn:function(s){return[s.item.hasActiveMembership?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"text-success",attrs:{title:e.$t("membership.has_active_membership")}},[t("i",{staticClass:"far fa-id-badge"})]):t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"text-light",attrs:{title:e.$t("membership.no_active_membership")}},[t("i",{staticClass:"far fa-id-badge"})])]}},{key:"cell(isPremium)",fn:function(s){return[s.item.isPremium?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"text-success",attrs:{title:e.$t("user.is_premium_user")}},[t("i",{staticClass:"fas fa-star"})]):t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"text-light",attrs:{title:e.$t("user.is_not_premium_user")}},[t("i",{staticClass:"far fa-star"})])]}},{key:"cell(role)",fn:function(s){return[t("badge",{attrs:{rounded:"",type:"dark"}},[e._v(e._s(s.item.role.name))])]}},{key:"cell(actions)",fn:function(s){return[t("table-row-actions",[t("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"appUserView",params:{uuid:s.item.uuid}}}},[t("i",{staticClass:"fas fa-arrow-circle-right"}),e._v(" "+e._s(e.$t("global.view",{attribute:e.$t("user.user")})))]),e.hasPermission("edit-user")?t("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"appUserEdit",params:{uuid:s.item.uuid}}}},[t("i",{staticClass:"fas fa-edit"}),e._v(" "+e._s(e.$t("global.edit",{attribute:e.$t("user.user")})))]):e._e(),e.hasRole("admin")&&!s.item.isPremium?t("a",{staticClass:"dropdown-item",on:{click:function(i){return i.stopPropagation(),e.togglePremiumUser(s.item)}}},[t("i",{staticClass:"fas fa-star"}),e._v(" "+e._s(e.$t("user.make_premium_user")))]):e._e(),e.hasRole("admin")&&s.item.isPremium?t("a",{staticClass:"dropdown-item",on:{click:function(i){return i.stopPropagation(),e.togglePremiumUser(s.item)}}},[t("i",{staticClass:"far fa-star"}),e._v(" "+e._s(e.$t("user.make_normal_user")))]):e._e(),e.hasPermission("delete-user")?t("a",{staticClass:"dropdown-item",on:{click:function(i){return i.stopPropagation(),e.deleteEntity(s.item)}}},[t("i",{staticClass:"fas fa-trash"}),e._v(" "+e._s(e.$t("global.delete",{attribute:e.$t("user.user")})))]):e._e()],1)]}}],null,!1,3241652716)})],1):e._e()],1)],1)],1)},b=[],_=r(p,f,b,!1,null,null,null,null);const L=_.exports;export{L as default};
