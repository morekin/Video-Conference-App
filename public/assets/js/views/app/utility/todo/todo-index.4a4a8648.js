import{t as r}from"../../../../table.beb39f38.js";import{f as l}from"../../../../filter-form.45f778d7.js";import{n as o}from"../../../../_plugin-vue2_normalizer.7b9a2fe2.js";import"../../../../app.a373aa59.js";import"../../../../vendor/vendor-core.3574f8d9.js";import"../../../../vendor/vendor-others.c8ba1624.js";import"../../../../vendor/vendor-essential.91b5cfa2.js";import"../../../../vendor/vendor-bootstrap-vue.17129278.js";import"../../../../vendor/vendor-vue-gtag.f8884558.js";import"../../../../header.43f859fb.js";import"../../../../event-bus.6a5776a8.js";const d={extends:l};var n=function(){var t=this,e=t._self._c;return e("filter-wrapper",{attrs:{boxed:t.boxed,"is-loading":t.isLoading},on:{close:function(i){return t.$emit("close")}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-md-4 mb-3"},[e("base-input",{attrs:{"auto-focus":"",label:t.$t("general.search_keyword"),type:"text",disabled:t.isLoading},model:{value:t.filters.keyword,callback:function(i){t.$set(t.filters,"keyword",i)},expression:"filters.keyword"}})],1),e("div",{staticClass:"col-12 col-md-4 mb-3"},[e("base-select",{attrs:{options:t.preRequisite.statuses,label:t.$t("utility.todo.props.status"),disabled:t.isLoading,simple:!0},model:{value:t.filters.status,callback:function(i){t.$set(t.filters,"status",i)},expression:"filters.status"}})],1),e("div",{staticClass:"col-12 col-md-4 mb-3"},[e("date-between",{attrs:{label:t.$t("global.between",{attribute:t.$t("utility.todo.todo")}),start:t.filters.startDate,end:t.filters.endDate,disabled:t.isLoading},on:{"update:start":function(i){return t.$set(t.filters,"startDate",i)},"update:end":function(i){return t.$set(t.filters,"endDate",i)}}})],1)])])},u=[],c=o(d,n,u,!1,null,null,null,null);const p=c.exports,m={components:{FilterForm:p},extends:r,data(){return{fields:[{key:"title",label:$t("utility.todo.props.title"),sort:"title",transformer:"limitWords",tdClass:"td-ellipsis max-width-250px"},{key:"date",label:$t("utility.todo.due_on"),sort:"date",transformer:"date"},{key:"status",label:$t("utility.todo.props.status"),sort:"status",transformer:"badgeStatusCompleted"},{key:"completedAt",label:$t("utility.todo.completed_at"),sort:"completed_at",transformer:"date"},{key:"actions",label:"",cantHide:!0,tdClass:"actions-dropdown-wrapper"}],filtersOptions:{keyword:"",status:"",startDate:"",endDate:""},permissionsRequired:"access-todo",routesRequired:{add:"appUtilityTodoAdd"},initUrl:"utility/todos",dataType:"todo"}},methods:{toggleTodo(a){this.isLoading=!0,this.Custom({url:"utility/todos/"+a.uuid+"/status",method:"post"}).then(t=>{this.isLoading=!1,this.$nextTick(()=>{this.refreshTable()})}).catch(t=>{this.isLoading=!1,formUtil.handleErrors(t)})}},mounted(){this.updatePageMeta()}};var f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"entity-list-container"},[e("collapse-transition",{attrs:{group:!0,duration:300,tag:"div"}},[t.showFilters?e("filter-form",{key:"filters",attrs:{boxed:!0,"pre-requisite":t.preRequisite,"is-loading":t.isLoading},on:{close:t.toggleFilter}}):t._e(),e("base-container",{key:"list",staticClass:"p-0",attrs:{boxed:"","with-loader":"","is-loading":t.isLoading,"loader-color":t.vars.loaderColor}},[t.isInitialized?e("table-wrapper",{attrs:{meta:t.entities.meta,filtered:t.isFiltered,"add-button-route":"appUtilityTodoAdd","add-button-permissions":["access-todo"],"entity-title":"utility.todo.todo","entities-title":"utility.todo.todos","entity-description":"utility.todo.module_description"}},[e("b-table",{directives:[{name:"show",rawName:"v-show",value:t.entities.meta.total,expression:"entities.meta.total"}],ref:"btable",attrs:{items:t.itemsProvider,fields:t.fields,busy:t.isLoading,hover:"",striped:"",stacked:"sm","per-page":t.entities.meta.perPage,"current-page":t.entities.meta.currentPage,filters:null},on:{"update:busy":function(i){t.isLoading=i},"row-dblclicked":function(i){return t.rowClickHandler({route:"appUtilityTodoView"},i)}},scopedSlots:t._u([{key:"cell(date)",fn:function(i){return[i.item.time?e("view-date",{staticClass:"mb-0",attrs:{value:`${i.item.date} ${i.item.time}`,"with-tz":"",tag:"span"}}):e("view-date",{staticClass:"mb-0",attrs:{value:i.item.date,tag:"span"}})]}},{key:"cell(completedAt)",fn:function(i){return[e("view-date",{staticClass:"mb-0",attrs:{value:i.item.completedAt,"with-tz":"",tag:"span"}})]}},{key:"cell(status)",fn:function(i){return[e("div",{staticClass:"pointer",on:{click:function(s){return s.stopPropagation(),t.toggleTodo(i.item)}}},[i.item.status?e("badge",{attrs:{rounded:"",type:"primary"}},[e("i",{staticClass:"far fa-check-circle"}),t._v(" "+t._s(t.$t("utility.todo.completed")))]):e("badge",{attrs:{rounded:"",type:"dark"}},[e("i",{staticClass:"far fa-circle"}),t._v(" "+t._s(t.$t("utility.todo.incomplete")))])],1)]}},{key:"cell(actions)",fn:function(i){return[e("base-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],class:i.item.status?"text-success":"text-dark",attrs:{type:"button",size:"sm",design:"",title:t.$t("global.toggle",{attribute:t.$t("utility.todo.todo")})},on:{click:function(s){return s.stopPropagation(),t.toggleTodo(i.item)}}},[i.item.status?e("i",{staticClass:"fas fa-check-circle"}):e("i",{staticClass:"fas fa-times-circle"})]),e("table-row-actions",[e("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"appUtilityTodoView",params:{uuid:i.item.uuid}}}},[e("i",{staticClass:"fas fa-arrow-circle-right"}),t._v(" "+t._s(t.$t("global.view",{attribute:t.$t("utility.todo.todo")})))]),t.hasPermission("edit-user")?e("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"appUtilityTodoEdit",params:{uuid:i.item.uuid}}}},[e("i",{staticClass:"fas fa-edit"}),t._v(" "+t._s(t.$t("global.edit",{attribute:t.$t("utility.todo.todo")})))]):t._e(),t.hasPermission("delete-user")?e("a",{staticClass:"dropdown-item",on:{click:function(s){return s.stopPropagation(),t.deleteEntity(i.item)}}},[e("i",{staticClass:"fas fa-trash"}),t._v(" "+t._s(t.$t("global.delete",{attribute:t.$t("utility.todo.todo")})))]):t._e()],1)]}}],null,!1,998769854)})],1):t._e()],1)],1)],1)},b=[],y=o(m,f,b,!1,null,null,null,null);const P=y.exports;export{P as default};
