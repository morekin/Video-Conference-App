import{B as a,G as i,a as n}from"../../guest-footer.6b237a73.js";import{m as o,i as l}from"../../vendor/vendor-core.3574f8d9.js";import{P as u}from"../../default-profile-image-male.529a2fd5.js";import{A as f}from"../../vendor/vendor-vue-avatar.c0747b65.js";import{n as m}from"../../_plugin-vue2_normalizer.7b9a2fe2.js";import"../../AppLogo.91541531.js";import"../../vendor/vendor-others.c8ba1624.js";const c={components:{Box:a,GuestHeader:i,GuestFooter:n,Avatar:f},data(){return{formData:{password:""},ProfileImageMale:u,formErrors:{},isLoading:!1}},computed:{...o("config",["configs","uiConfigs","vars"]),...o("user",["profile"])},methods:{...l("user",["Logout","Unlock","SetLock","SetLastActivity"]),submit(){this.isLoading=!0;let s=this.$route.query;this.$gaEvent("engagement","unlock"),this.Unlock(this.formData).then(t=>{this.SetLastActivity(),this.SetLock(!1),this.$gaEvent("activity","unlocked");let e={name:"appDashboard"};s&&s.ref&&this.$router.resolve(s.ref)&&(e=this.$router.resolve(s.ref).route),this.$router.push(e)}).catch(t=>{this.isLoading=!1,this.formErrors=formUtil.handleErrors(t)})},logout(){this.isLoading=!0;let s=this.$route.query;this.Logout().then(()=>{let t={name:"login"};s&&s.ref&&this.$router.resolve(s.ref)&&(t=this.$router.resolve(s.ref).route),this.$router.push(t)})}}};var p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"guest-page"},[e("box",[e("animated-loader",{attrs:{"is-loading":t.isLoading,"loader-color":t.vars.loaderColor}}),e("guest-header",[t.profile&&t.profile.name?e("div",{staticClass:"d-flex flex-column justify-content-start align-items-center"},[e("avatar",{attrs:{username:t.profile.name?t.profile.name:null,src:t.profile.userThumb?t.profile.userThumb:t.profile.name?null:t.ProfileImageMale,"background-color":t.vars.colors.primary,color:t.vars.colors.white,size:100,"has-shadow":""}}),e("h4",{staticClass:"username mt-4"},[t._v(" "+t._s(t.$t("general.greeting")+", "+t.profile.name)+" ")])],1):t._e()]),e("section",{attrs:{role:"main"}},[e("form",{on:{submit:function(r){return r.preventDefault(),t.submit.apply(null,arguments)}}},[e("base-input",{staticClass:"mb-3",attrs:{"auto-focus":"",label:t.$t("auth.lock.props.password"),type:"password",name:"password","addon-left-icon":"fas fa-key",error:t.formErrors.password,autocomplete:"current-password"},on:{"update:error":function(r){return t.$set(t.formErrors,"password",r)}},model:{value:t.formData.password,callback:function(r){t.$set(t.formData,"password",r)},expression:"formData.password"}}),e("div",{staticClass:"text-center"},[e("base-button",{staticClass:"my-4 text-lg",attrs:{type:"submit",design:"primary",block:""}},[t._v(t._s(t.$t("general.unlock")))])],1),e("div",{staticClass:"form-group m-b-0"},[e("div",{staticClass:"col-sm-12 text-center"},[e("h6",{staticClass:"text-uppercase"},[t._v(t._s(t.$t("general.or")))]),e("p",[e("base-button",{attrs:{type:"button",design:"link"},on:{click:t.logout}},[e("i",{staticClass:"fas fa-power-off"}),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("auth.logout")))])])],1)])])],1)])],1),t.configs.system?e("guest-footer",{attrs:{"footer-credit":t.configs.system.footerCredit,version:t.configs.system.version}}):t._e()],1)},d=[],g=m(c,p,d,!1,null,null,null,null);const C=g.exports;export{C as default};
