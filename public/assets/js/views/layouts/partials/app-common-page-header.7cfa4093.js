import{E as o}from"../../../event-bus.6a5776a8.js";import{m as i,i as d}from"../../../vendor/vendor-core.3574f8d9.js";import{A as c}from"../../../app-page-header-wrapper.7c301931.js";import{n}from"../../../_plugin-vue2_normalizer.7b9a2fe2.js";import"../../../vendor/vendor-others.c8ba1624.js";const p={props:["removeDefaultRoot"],components:{},data(){return{breadcrumbItemList:[]}},watch:{$route(){this.getBreadcrumb()}},mounted(){this.getBreadcrumb()},methods:{getBreadcrumb(){this.removeDefaultRoot||(this.breadcrumbItemList=[{path:{name:"App"},meta:{title:"general.app"},custom:!0}]),this.breadcrumbItemList=this.breadcrumbItemList.concat(this.$route.matched.filter(a=>a.meta&&a.meta.title&&!a.meta.hideBreadcrumb))}}};var u=function(){var e=this,s=e._self._c;return s("transition-group",{staticClass:"breadcrumb transparent breadcrumb-icon-angle-right",attrs:{appear:"",tag:"ol",name:"breadcrumb"}},[e._l(e.breadcrumbItemList,function(t,r){return[r==e.breadcrumbItemList.length-1?s("li",{key:t.path.name||t.path,staticClass:"breadcrumb-item",class:[r==e.breadcrumbItemList.length-1?"active":""]},[e._v(" "+e._s(t.meta.trans?e.$t(t.meta.trans,{attribute:e.$t(t.meta.title)}):e.$t(t.meta.title))+" ")]):s("li",{key:t.path.name||t.path+t.meta.title,staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:t.meta.forceRedirect||t.redirect||t.path}},[e._v(" "+e._s(t.meta.trans?e.$t(t.meta.trans,{attribute:e.$t(t.meta.title)}):e.$t(t.meta.title))+" ")])],1)]})],2)},h=[],m=n(p,u,h,!1,null,"21e00290",null,null);const g=m.exports,_={props:["hideBreadcrumbs"],components:{AppPageHeaderWrapper:c,AppBreadcrumb:g},computed:{...i("common",["pageHeader"]),...i("config",["uiConfigs"]),pageTitle(){return this.pageHeader&&this.pageHeader.title?this.pageHeader.title:this.$route.meta.trans?this.$t(this.$route.meta.trans,{attribute:this.$t(this.$route.meta.midTitle)+" "+this.$t(this.$route.meta.title)}):this.$t(this.$route.meta.midTitle)+" "+this.$t(this.$route.meta.title)},pageSubTitle(){return this.pageHeader&&this.pageHeader.subTitle?this.pageHeader.subTitle:""}}};var f=function(){var e=this,s=e._self._c;return e.uiConfigs.pageHeaderShow?s("app-page-header-wrapper",[s("div",{staticClass:"page-header-content"},[s("div",{staticClass:"header-breadcrumb-wrapper"},[s("transition-group",{staticClass:"page-header-title",attrs:{appear:"",tag:"h4",name:"title"}},[s("span",{key:"Just"}),s("span",{key:e.pageTitle},[e._v(e._s(e.pageTitle)+" "),s("span",{staticClass:"text-muted text-sm"},[e._v(e._s(e.pageSubTitle))])])]),e.hideBreadcrumbs?e._e():[s("app-breadcrumb",{staticClass:"breadcrumb-icon-bars"})]],2),s("div",{staticClass:"action-buttons-wrapper"},[s("div",{staticClass:"action-buttons"},[e._t("default")],2)])])]):e._e()},v=[],C=n(_,f,v,!1,null,null,null,null);const $=C.exports;const H={components:{AppPageHeader:$},data(){return{eventBus:o,pageHeaderButtons:[],pageHeaderLinks:[],pageHeaderSortOptions:[]}},computed:{...i("config",["uiConfigs"]),...i("common",["columns","filters","pageHeader"]),...i("common",{totalItems:"totalItems"}),...i("user",["hasAllPermissions"])},watch:{pageHeader:{deep:!0,immediate:!0,handler(a,e){a?(a.buttons?this.pageHeaderButtons=a.buttons.filter(s=>!s.permissions||this.hasAllPermissions(s.permissions)):this.pageHeaderButtons=[],a.links?this.pageHeaderLinks=a.links.filter(s=>!s.permissions||this.hasAllPermissions(s.permissions)):this.pageHeaderLinks=[],a.sort&&a.sort.options?this.pageHeaderSortOptions=[...a.sort.options]:this.pageHeaderSortOptions=[]):(this.pageHeaderButtons=[],this.pageHeaderLinks=[],this.pageHeaderSortOptions=[])}}},methods:{...d("common",["SetColumns"]),updateRouteQuery(a){const e=Object.assign({},this.$route.query,a);this.$router.push({path:this.$route.path,query:e})},dispatchSortAction(a,e={}){this.$store.dispatch(`${a}/SetFilters`,e)},getSortStatus(a,e){const s=this.$store.getters[`${a}/filters`];let t=!0;return e.objForEach((r,l)=>{t=s[l]===r}),t},toggleColumn(a){let e=[];this.columns.fields.objForEach(s=>{(s.cantHide||!(s.thClass&&s.thClass.includes("d-none")))&&e.push(s.key)}),!a.thClass||!a.thClass.includes("d-none")?(a.thClass=a.thClass+" d-none",a.tdClass=a.thClass+" d-none"):e.length>=15?this.$toasted.error(this.$t("global.max_num_allowed",{attribute:15}),this.$toastConfig.error):a.thClass&&a.tdClass&&(a.thClass=a.thClass.replace("d-none",""),a.tdClass=a.tdClass.replace("d-none","")),this.SetColumns(this.columns.fields)},uncheckAllColumn(){this.columns.fields.objForEach(a=>{!a.cantHide&&!a.thClass.includes("d-none")&&(a.thClass=a.thClass+" d-none",a.tdClass=a.thClass+" d-none")}),this.SetColumns(this.columns.fields)},toggleHelp(){this.$route.name&&o.$emit("TOGGLE_HELP",this.$route.name)},toSnakeCase(a){return a.replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()})}},created:function(){o.$off("OPEN_PRINT",this.handleOpenPrint),o.$on("OPEN_PRINT",this.handleOpenPrint)},destroyed(){o.$off("OPEN_PRINT",this.handleOpenPrint)}};var b=function(){var e=this,s=e._self._c;return s("app-page-header",[e._l(e.pageHeaderButtons,function(t){return[t.label&&t.tooltip?s("base-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],key:t.label,attrs:{type:"button",design:t.design||"white",size:t.size||"md",title:t.trans?e.$t(t.trans,{attribute:t.tooltip}):t.tooltip},on:{click:function(r){return t.action(e.$router,e.eventBus)}}},[s("i",{class:t.icon}),e._v(" "+e._s(t.trans?e.$t(t.trans,{attribute:t.label}):t.label)+" ")]):t.label?s("base-button",{key:t.label,attrs:{type:"button",design:t.design||"white",size:t.size||"md"},on:{click:function(r){return t.action(e.$router,e.eventBus)}}},[s("i",{class:t.icon}),e._v(" "+e._s(t.trans?e.$t(t.trans,{attribute:t.label}):t.label)+" ")]):t.tooltip?s("base-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],key:t.tooltip,attrs:{type:"button",design:t.design||"white",size:t.size||"md",title:t.trans?e.$t(t.trans,{attribute:t.tooltip}):t.tooltip},on:{click:function(r){return t.action(e.$router,e.eventBus)}}},[s("i",{class:t.icon})]):s("base-button",{key:t.tooltip,attrs:{type:"button",design:t.design||"white",size:t.size||"md"},on:{click:function(r){return t.action(e.$router,e.eventBus)}}},[s("i",{class:t.icon})])]}),this.totalItems&&e.pageHeader.sort?s("base-dropdown",{staticClass:"header-links-dropdown",attrs:{tag:"div",direction:"down","menu-classes":"show-dropdown-up",position:"right","has-scroll":e.pageHeader.sort.hasScroll||!1}},[s("base-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{slot:"title",type:"button","data-toggle":"dropdown",role:"button",design:e.pageHeader.sort&&e.pageHeader.sort.design||"white",size:e.pageHeader.sort&&e.pageHeader.sort.size||"md",title:e.$t("general.sort_by")},slot:"title"},[s("i",{staticClass:"fas fa-sort"})]),s("a",{staticClass:"dropdown-item",on:{click:function(t){return e.updateRouteQuery({order:"asc"})}}},[s("i",{staticClass:"fas fa-sort-alpha-down"}),e._v(" "+e._s(e.$t("list.general.orders.asc"))+" "),e.getSortStatus(e.pageHeader.sort.storeName,{order:"asc"})?s("i",{staticClass:"fas fa-check pull-right"}):e._e()]),s("a",{staticClass:"dropdown-item",on:{click:function(t){return e.updateRouteQuery({order:"desc"})}}},[s("i",{staticClass:"fas fa-sort-alpha-up"}),e._v(" "+e._s(e.$t("list.general.orders.desc"))+" "),e.getSortStatus(e.pageHeader.sort.storeName,{order:"desc"})?s("i",{staticClass:"fas fa-check pull-right"}):e._e()]),s("div",{staticClass:"dropdown-divider",attrs:{role:"separator"}}),e._l(e.pageHeaderSortOptions,function(t){return[s("a",{key:t.label,class:["dropdown-item",{"secure-content":t.thClass&&t.thClass.includes("secure-content")}],on:{click:function(r){return e.updateRouteQuery({sortBy:t.sort?t.sort:t.dispatch.sortBy})}}},[e._v(e._s(t.label)+" "),e.getSortStatus(e.pageHeader.sort.storeName,{sortBy:t.sort?t.sort:t.dispatch.sortBy})?s("i",{staticClass:"fas fa-check pull-right"}):e._e()])]})],2):e._e(),this.totalItems&&e.columns&&e.columns.fields?s("base-dropdown",{staticClass:"header-columns-dropdown",attrs:{tag:"div",size:"md","toggle-on-click":!1,direction:"down","menu-classes":"show-dropdown-up",position:"right","dropdown-menu-tag":"div","has-scroll":e.pageHeader.columns&&e.pageHeader.columns.hasScroll&&e.pageHeader.columns.hasScroll||!1}},[s("base-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{slot:"title",type:"button","data-toggle":"dropdown",role:"button",design:e.pageHeader.columns&&e.pageHeader.columns.design?e.pageHeader.columns.design:"white",size:e.pageHeader.columns&&e.pageHeader.columns.size?e.pageHeader.columns.size:"md",title:e.$t("general.columns")},slot:"title"},[s("i",{staticClass:"fas fa-columns"})]),s("a",{key:"uncheck-all",staticClass:"dropdown-item text-right",on:{click:e.uncheckAllColumn}},[e._v(e._s(e.$t("general.uncheck_all")))]),s("div",{staticClass:"dropdown-divider",attrs:{role:"separator"}}),e._l(e.columns.fields,function(t,r){return[t.cantHide?e._e():[s("a",{key:t.key,class:["dropdown-item",{"secure-content":t.thClass&&t.thClass.includes("secure-content")}],on:{click:function(l){return e.toggleColumn(e.columns.fields[r])}}},[e._v(e._s(t.label?t.label:t.headerTitle)+" "),!t.thClass||!t.thClass.includes("d-none")?s("i",{staticClass:"fas fa-check pull-right"}):e._e()])]]})],2):e._e(),!e.pageHeader.hideLinks&&e.pageHeaderLinks&&e.pageHeaderLinks.length?s("base-dropdown",{staticClass:"header-links-dropdown",attrs:{tag:"div",direction:"down","menu-classes":"show-dropdown-up",position:"right"}},[s("base-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{slot:"title",type:"button","data-toggle":"dropdown",role:"button",design:"white",size:"md",title:e.$t("general.more_option")},slot:"title"},[s("i",{staticClass:"fas fa-ellipsis-v"})]),e._l(e.pageHeaderLinks,function(t){return[t.href?s("a",{key:t.label,staticClass:"dropdown-item",attrs:{href:t.href}},[t.icon?s("i",{class:t.icon}):e._e(),e._v(" "+e._s(t.trans?e.$t(t.trans,{attribute:t.label}):t.label))]):t.dispatch?s("a",{key:t.label,staticClass:"dropdown-item",on:{click:function(r){return e.$store.dispatch(t.dispatch.action,t.dispatch.params)}}},[t.icon?s("i",{class:t.icon}):e._e(),e._v(" "+e._s(t.trans?e.$t(t.trans,{attribute:t.label}):t.label))]):t.action?s("a",{key:t.label,staticClass:"dropdown-item",on:{click:function(r){return t.action(e.$router,e.eventBus)}}},[t.icon?s("i",{class:t.icon}):e._e(),e._v(" "+e._s(t.trans?e.$t(t.trans,{attribute:t.label}):t.label))]):t.separator?s("div",{key:t.label,staticClass:"dropdown-divider",attrs:{role:"separator"}}):t.to?s("router-link",{key:t.label,staticClass:"dropdown-item",attrs:{to:t.to}},[t.icon?s("i",{class:t.icon}):e._e(),e._v(" "+e._s(t.trans?e.$t(t.trans,{attribute:t.label}):t.label))]):void 0]})],2):e._e()],2)},w=[],y=n(H,b,w,!1,null,"9d552f3e",null,null);const k=y.exports;export{k as default};
