import{A as i}from"../../../AppLogo.91541531.js";import{i as o}from"../../../vendor/vendor-core.3574f8d9.js";import{s as a}from"../../../vendor/vendor-screenfull.9a79c0ca.js";import{u as l}from"../../../user-dropdown.0d279254.js";import{l as r}from"../../../app.a373aa59.js";import{n as c}from"../../../_plugin-vue2_normalizer.7b9a2fe2.js";import"../../../vendor/vendor-others.c8ba1624.js";import"../../../vendor/vendor-vue-avatar.c0747b65.js";import"../../../vendor/vendor-essential.91b5cfa2.js";import"../../../vendor/vendor-bootstrap-vue.17129278.js";import"../../../vendor/vendor-vue-gtag.f8884558.js";const d={extends:l,components:{AppLogo:i},data(){return{userDropddownOpen:!1}},computed:{selectedLocale(){return this.configs.system.locales.find(n=>n.locale===this.configs.system.locale)}},methods:{...o("config",["SetUiConfig"]),...o("common",["Custom"]),...o("navigation",["Generate"]),...o("user",["GetUser"]),toggleFullScreen(n){a.isEnabled&&(n?a.request():a.exit())},setLocaleUserPreference(n){this.isLoading=!0,r({system:{locale:n?n.locale:"en"}}).then(e=>{this.GetUser().then(()=>{location.reload(),this.isLoading=!1}).catch(s=>{this.isLoading=!1,formUtil.handleErrors(s)})}).catch(e=>{this.isLoading=!1,formUtil.handleErrors(e)})}},mounted(){a.isEnabled&&(a.on("change",()=>{this.SetUiConfig({fullScreen:a.isFullscreen})}),a.on("error",n=>{console.error("Failed to enable fullscreen",n)}),this.SetUiConfig({fullScreen:!1}))},destroyed(){a.isEnabled&&(a.off("change"),a.off("error"))}};var f=function(){var e=this,s=e._self._c;return s("nav",{staticClass:"navbar navbar-design-basic navbar-expand-sm d-flex justify-content-around align-items-center flex-nowrap"},[s("app-logo",{attrs:{place:"navbar"}}),s("ul",{staticClass:"nav nav-inline d-none d-lg-flex mr-2"},[s("li",{staticClass:"nav-item"},[e.uiConfigs.fullScreen?s("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"nav-link toggle-full-screen",attrs:{title:e.$t("config.ui.toggle_fullscreen")},on:{click:function(t){return e.toggleFullScreen(!1)}}},[s("i",{staticClass:"fas fa-compress"})]):s("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"nav-link toggle-full-screen",attrs:{title:e.$t("config.ui.toggle_fullscreen")},on:{click:function(t){return e.toggleFullScreen(!0)}}},[s("i",{staticClass:"fas fa-expand"})])])]),s("ul",{staticClass:"nav nav-inline d-none d-md-flex mr-3"},[e.configs.system&&e.configs.system.maintenanceMode?s("li",{staticClass:"nav-item"},[s("span",{staticClass:"warning-label badge badge-warning"},[e._v(e._s(e.$t("config.system.under_maintenance")))])]):e._e(),e.configs.system&&!e.configs.system.mode?s("li",{staticClass:"nav-item"},[s("span",{staticClass:"warning-label badge badge-warning"},[e._v(e._s(e.$t("config.system.test_mode")))])]):e._e(),e.isOnline?e._e():s("li",{staticClass:"nav-item ml-2"},[s("span",{staticClass:"warning-label badge badge-error"},[s("i",{staticClass:"fas fa-exclamation-triangle"}),e._v(" "+e._s(e.$t("general.offline")))])])]),s("div",{staticClass:"separator"}),s("ul",{staticClass:"navbar-nav"},[e.configs.system.locales&&e.configs.system.locales.length>1?s("base-dropdown",{staticClass:"nav-item d-none d-sm-flex",attrs:{tag:"div",position:"right"}},[s("a",{staticClass:"nav-link",attrs:{slot:"title","data-toggle":"dropdown",role:"button"},slot:"title"},[s("span",{staticClass:"mr-1"},[e._v(e._s(e.selectedLocale.name)+" ("+e._s(e.selectedLocale.locale)+")")]),e._v(" "),s("i",{staticClass:"fas fa-angle-down"})]),e._l(e.configs.system.locales,function(t){return s("li",{key:t.locale,staticClass:"dropdown-item",on:{click:function(u){return e.setLocaleUserPreference(t)}}},[e._v(" "+e._s(t.name)+" ("+e._s(t.locale)+") "),t.locale==e.configs.system.locale?s("span",{staticClass:"pull-right"},[s("i",{staticClass:"fas fa-check"})]):e._e()])})],2):e._e(),s("base-dropdown",{staticClass:"nav-item d-flex",attrs:{tag:"li","data-v-step":"user-dropdown",position:"right",open:e.userDropddownOpen},on:{"update:open":function(t){e.userDropddownOpen=t}}},[s("a",{staticClass:"nav-link nav-link-icon nav-user-avatar p-0",attrs:{slot:"title","data-toggle":"dropdown",role:"button"},slot:"title"},[e.loggedInUser?s("user-avatar",{attrs:{user:e.loggedInUser,size:40,"foreground-color":e.uiConfigs.hideSecureContent?e.vars.colors.danger:e.vars.colors.primary}}):e._e()],1),s("h6",{staticClass:"dropdown-header"},[e._v(e._s(e.$t("general.greeting")+", "+e.loggedInUser.name))]),s("div",{staticClass:"dropdown-divider",attrs:{role:"separator"}}),s("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.logout.apply(null,arguments)}}},[s("i",{staticClass:"fas fa-power-off"}),e._v(" "+e._s(e.$t("auth.logout")))])])],1)],1)},g=[],m=c(d,f,g,!1,null,null,null,null);const L=m.exports;export{L as default};
